import{a as _t}from"./chunk-UZYDSN7X.js";import{a as V}from"./chunk-3SSBONDS.js";import{a as te}from"./chunk-L3JRBETB.js";import{a as Rt}from"./chunk-BV3G4Q3P.js";import"./chunk-HMNUYURD.js";import{a as Et}from"./chunk-7ZANBAUH.js";import{A as Jt,L as je,M as kt,O as He,P as ze,Q as $e,R as Ge,S as Ue,_ as St,b as Kt,ba as We,c as Le,d as H,f as mt,fa as Qe,g as Tt,h as pt,i as Yt,ia as qe,j as Fe,k as Oe,l as Ae,la as Pt,m as Ne,pa as Ze,q as Be,r as Ve,t as Xt}from"./chunk-I7SMIBGI.js";import"./chunk-CARY4E7O.js";import"./chunk-SWSILSZJ.js";import{$ as nt,$b as D,$c as Dt,Cb as Se,Ea as Ie,Ec as dt,F as ye,Fa as xt,Fc as ht,G as vt,Gb as Zt,Ha as O,Hb as g,Ia as ot,Jb as j,Ka as Te,La as ke,Ma as rt,Mc as Ee,N as T,Nb as C,Pc as wt,Qb as st,Rb as lt,Sb as _,Sc as K,Tb as p,Tc as Re,Ub as M,Xc as Me,Yb as P,Z as Ut,_ as xe,a as x,b as A,ba as we,bc as m,ea as at,fa as Ct,ha as G,hb as h,hd as It,i as X,ib as v,ja as U,k as Gt,ka as w,kb as Qt,mc as q,n as b,nc as ct,o as et,oa as W,oc as Pe,pa as yt,pb as qt,qa as Q,r as Ce,sb as N,ua as De,uc as B,vc as Z,wb as J,wc as u,xa as Wt,y as it,ya as k,yc as L,za as S,zb as y}from"./chunk-ZZEMHH24.js";var Ke=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=yt({type:a})}static{this.\u0275inj=Ct({imports:[Xt,Xt]})}}return a})();function hi(a){let i=a.cloneNode(!0),t=i.querySelectorAll("[id]"),e=a.nodeName.toLowerCase();i.removeAttribute("id");for(let n=0;n<t.length;n++)t[n].removeAttribute("id");return e==="canvas"?Je(a,i):(e==="input"||e==="select"||e==="textarea")&&Xe(a,i),Ye("canvas",a,i,Je),Ye("input, textarea, select",a,i,Xe),i}function Ye(a,i,t,e){let n=i.querySelectorAll(a);if(n.length){let o=t.querySelectorAll(a);for(let r=0;r<n.length;r++)e(n[r],o[r])}}var Li=0;function Xe(a,i){i.type!=="file"&&(i.value=a.value),i.type==="radio"&&i.name&&(i.name=`mat-clone-${i.name}-${Li++}`)}function Je(a,i){let t=i.getContext("2d");if(t)try{t.drawImage(a,0,0)}catch{}}function le(a){let i=a.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function ie(a,i,t){let{top:e,bottom:n,left:o,right:r}=a;return t>=e&&t<=n&&i>=o&&i<=r}function bt(a,i,t){a.top+=i,a.bottom=a.top+a.height,a.left+=t,a.right=a.left+a.width}function ti(a,i,t,e){let{top:n,right:o,bottom:r,left:s,width:l,height:c}=a,d=l*i,f=c*i;return e>n-f&&e<r+f&&t>s-d&&t<o+d}var At=class{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:le(t)})})}handleScroll(i){let t=pt(i),e=this.positions.get(t);if(!e)return null;let n=e.scrollPosition,o,r;if(t===this._document){let c=this.getViewportScrollPosition();o=c.top,r=c.left}else o=t.scrollTop,r=t.scrollLeft;let s=n.top-o,l=n.left-r;return this.positions.forEach((c,d)=>{c.clientRect&&t!==d&&t.contains(d)&&bt(c.clientRect,s,l)}),n.top=o,n.left=r,{top:s,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function mi(a,i){let t=a.rootNodes;if(t.length===1&&t[0].nodeType===i.ELEMENT_NODE)return t[0];let e=i.createElement("div");return t.forEach(n=>e.appendChild(n)),e}function ce(a,i,t){for(let e in i)if(i.hasOwnProperty(e)){let n=i[e];n?a.setProperty(e,n,t?.has(e)?"important":""):a.removeProperty(e)}return a}function tt(a,i){let t=i?"":"none";ce(a.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function ei(a,i,t){ce(a.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},t)}function Nt(a,i){return i&&i!="none"?a+" "+i:a}function ii(a,i){a.style.width=`${i.width}px`,a.style.height=`${i.height}px`,a.style.transform=Bt(i.left,i.top)}function Bt(a,i){return`translate3d(${Math.round(a)}px, ${Math.round(i)}px, 0)`}function ni(a){let i=a.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(a)*i}function Fi(a){let i=getComputedStyle(a),t=ee(i,"transition-property"),e=t.find(s=>s==="transform"||s==="all");if(!e)return 0;let n=t.indexOf(e),o=ee(i,"transition-duration"),r=ee(i,"transition-delay");return ni(o[n])+ni(r[n])}function ee(a,i){return a.getPropertyValue(i).split(",").map(e=>e.trim())}var Oi=new Set(["position"]),ne=class{get element(){return this._preview}constructor(i,t,e,n,o,r,s,l,c){this._document=i,this._rootElement=t,this._direction=e,this._initialDomRect=n,this._previewTemplate=o,this._previewClass=r,this._pickupPositionOnPage=s,this._initialTransform=l,this._zIndex=c}attach(i){this._preview=this._createPreview(),i.appendChild(this._preview),ai(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(i){this._preview.style.transform=i}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(i){this._preview.classList.add(i)}getTransitionDuration(){return Fi(this._preview)}addEventListener(i,t){this._preview.addEventListener(i,t)}removeEventListener(i,t){this._preview.removeEventListener(i,t)}_createPreview(){let i=this._previewTemplate,t=this._previewClass,e=i?i.template:null,n;if(e&&i){let o=i.matchSize?this._initialDomRect:null,r=i.viewContainer.createEmbeddedView(e,i.context);r.detectChanges(),n=mi(r,this._document),this._previewEmbeddedView=r,i.matchSize?ii(n,o):n.style.transform=Bt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=hi(this._rootElement),ii(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return ce(n.style,{"pointer-events":"none",margin:ai(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Oi),tt(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>n.classList.add(o)):n.classList.add(t)),n}};function ai(a){return"showPopover"in a}var oi=mt({passive:!0}),Lt=mt({passive:!1}),ri=mt({passive:!1,capture:!0}),Ai=800,si=new Set(["position"]),ae=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(i){i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(t=>tt(t,i)))}constructor(i,t,e,n,o,r){this._config=t,this._document=e,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=N(!1),this._moveEvents=new b,this._pointerMoveSubscription=X.EMPTY,this._pointerUpSubscription=X.EMPTY,this._scrollSubscription=X.EMPTY,this._resizeSubscription=X.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new b,this.started=new b,this.released=new b,this.ended=new b,this.entered=new b,this.exited=new b,this.dropped=new b,this.moved=this._moveEvents,this._pointerDown=s=>{if(this.beforeStarted.next(),this._handles.length){let l=this._getTargetHandle(s);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,s)}else this.disabled||this._initializeDragSequence(this._rootElement,s)},this._pointerMove=s=>{let l=this._getPointerPositionOnPage(s);if(!this._hasStartedDragging()){let d=Math.abs(l.x-this._pickupPositionOnPage.x),f=Math.abs(l.y-this._pickupPositionOnPage.y);if(d+f>=this._config.dragStartThreshold){let z=Date.now()>=this._dragStartTime+this._getDragStartDelay(s),$=this._dropContainer;if(!z){this._endDragSequence(s);return}(!$||!$.isDragging()&&!$.isReceiving())&&(s.cancelable&&s.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(s)))}return}s.cancelable&&s.preventDefault();let c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{let d=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=c.x-d.x+this._passiveTransform.x,f.y=c.y-d.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:s,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=s=>{this._endDragSequence(s)},this._nativeDragStart=s=>{if(this._handles.length){let l=this._getTargetHandle(s);l&&!this._disabledHandles.has(l)&&!this.disabled&&s.preventDefault()}else this.disabled||s.preventDefault()},this.withRootElement(i).withParent(t.parentDragRef||null),this._parentPositions=new At(e),r.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(e=>H(e)),this._handles.forEach(e=>tt(e,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(e=>{this._handles.indexOf(e)>-1&&t.add(e)}),this._disabledHandles=t,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){let t=H(i);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,Lt),t.addEventListener("touchstart",this._pointerDown,oi),t.addEventListener("dragstart",this._nativeDragStart,Lt)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?H(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),tt(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),tt(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){let i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){let i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",ci,ri)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){ut(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),e=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{t.addEventListener("selectstart",ci,ri)}),e){let n=this._rootElement,o=n.parentNode,r=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(s,n),this._initialTransform=n.style.transform||"",this._preview=new ne(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(o,t)),ei(n,!1,si),this._document.body.appendChild(o.replaceChild(r,n)),this.started.next({source:this,event:i}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(i,t){this._parentDragRef&&t.stopPropagation();let e=this.isDragging(),n=ut(t),o=!n&&t.button!==0,r=this._rootElement,s=pt(t),l=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+Ai>Date.now(),c=n?Ve(t):Be(t);if(s&&s.draggable&&t.type==="mousedown"&&t.preventDefault(),e||o||l||c)return;if(this._handles.length){let E=r.style;this._rootElementTapHighlight=E.webkitTapHighlightColor||"",E.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(E=>this._updateOnScroll(E)),this._boundaryElement&&(this._boundaryRect=le(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,i,t);let f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(i){ei(this._rootElement,!0,si),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,e=t.getItemIndex(this),n=this._getPointerPositionOnPage(i),o=this._getDragDistance(n),r=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:o,dropPoint:n,event:i}),this.dropped.next({item:this,currentIndex:e,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:o,dropPoint:n,event:i}),t.drop(this,e,this._initialIndex,this._initialContainer,r,o,n,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:t},{x:e,y:n}){let o=this._initialContainer._getSiblingContainerFromPosition(this,i,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,i,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(e,n),this._dropContainer._sortItem(this,i,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,t):this._applyPreviewTransform(i-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let i=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{let n=r=>{(!r||this._preview&&pt(r)===this._preview.element&&r.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",n),e(),clearTimeout(o))},o=setTimeout(n,t*1.5);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let i=this._placeholderTemplate,t=i?i.template:null,e;return t?(this._placeholderRef=i.viewContainer.createEmbeddedView(t,i.context),this._placeholderRef.detectChanges(),e=mi(this._placeholderRef,this._document)):e=hi(this._rootElement),e.style.pointerEvents="none",e.classList.add("cdk-drag-placeholder"),e}_getPointerPositionInElement(i,t,e){let n=t===this._rootElement?null:t,o=n?n.getBoundingClientRect():i,r=ut(e)?e.targetTouches[0]:e,s=this._getViewportScrollPosition(),l=r.pageX-o.left-s.left,c=r.pageY-o.top-s.top;return{x:o.left-i.left+l,y:o.top-i.top+c}}_getPointerPositionOnPage(i){let t=this._getViewportScrollPosition(),e=ut(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,n=e.pageX-t.left,o=e.pageY-t.top;if(this._ownerSVGElement){let r=this._ownerSVGElement.getScreenCTM();if(r){let s=this._ownerSVGElement.createSVGPoint();return s.x=n,s.y=o,s.matrixTransform(r.inverse())}}return{x:n,y:o}}_getConstrainedPointerPosition(i){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:e,y:n}=this.constrainPosition?this.constrainPosition(i,this,this._initialDomRect,this._pickupPositionInElement):i;if(this.lockAxis==="x"||t==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(e=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:r}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,s=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),d=s.top+r,f=s.bottom-(c-r),E=s.left+o,z=s.right-(l-o);e=li(e,E,z),n=li(n,d,f)}return{x:e,y:n}}_updatePointerDirectionDelta(i){let{x:t,y:e}=i,n=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-o.x),s=Math.abs(e-o.y);return r>this._config.pointerDirectionChangeThreshold&&(n.x=t>o.x?1:-1,o.x=t),s>this._config.pointerDirectionChangeThreshold&&(n.y=e>o.y?1:-1,o.y=e),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,tt(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,Lt),i.removeEventListener("touchstart",this._pointerDown,oi),i.removeEventListener("dragstart",this._nativeDragStart,Lt)}_applyRootElementTransform(i,t){let e=1/this.scale,n=Bt(i*e,t*e),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Nt(n,this._initialTransform)}_applyPreviewTransform(i,t){let e=this._previewTemplate?.template?void 0:this._initialTransform,n=Bt(i,t);this._preview.setTransform(Nt(n,e))}_getDragDistance(i){let t=this._pickupPositionOnPage;return t?{x:i.x-t.x,y:i.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:t}=this._passiveTransform;if(i===0&&t===0||this.isDragging()||!this._boundaryElement)return;let e=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||e.width===0&&e.height===0)return;let o=n.left-e.left,r=e.right-n.right,s=n.top-e.top,l=e.bottom-n.bottom;n.width>e.width?(o>0&&(i+=o),r>0&&(i-=r)):i=0,n.height>e.height?(s>0&&(t+=s),l>0&&(t-=l)):t=0,(i!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:i})}_getDragStartDelay(i){let t=this.dragStartDelay;return typeof t=="number"?t:ut(i)?t.touch:t?t.mouse:0}_updateOnScroll(i){let t=this._parentPositions.handleScroll(i);if(t){let e=pt(i);this._boundaryRect&&e!==this._boundaryElement&&e.contains(this._boundaryElement)&&bt(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Tt(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,t){let e=this._previewContainer||"global";if(e==="parent")return i;if(e==="global"){let n=this._document;return t||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return H(e)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(i){return this._handles.find(t=>i.target&&(i.target===t||t.contains(i.target)))}};function li(a,i,t){return Math.max(i,Math.min(t,a))}function ut(a){return a.type[0]==="t"}function ci(a){a.preventDefault()}function gt(a,i,t){let e=Vt(i,a.length-1),n=Vt(t,a.length-1);if(e===n)return;let o=a[e],r=n<e?-1:1;for(let s=e;s!==n;s+=r)a[s]=a[s+r];a[n]=o}function pi(a,i,t,e){let n=Vt(t,a.length-1),o=Vt(e,i.length);a.length&&i.splice(o,0,a.splice(n,1)[0])}function Vt(a,i){return Math.max(0,Math.min(i,a))}var jt=class{constructor(i){this._dragDropRegistry=i,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(i){this.withItems(i)}sort(i,t,e,n){let o=this._itemPositions,r=this._getItemIndexFromPointerPosition(i,t,e,n);if(r===-1&&o.length>0)return null;let s=this.orientation==="horizontal",l=o.findIndex(R=>R.drag===i),c=o[r],d=o[l].clientRect,f=c.clientRect,E=l>r?1:-1,z=this._getItemOffsetPx(d,f,E),$=this._getSiblingOffsetPx(l,o,E),Y=o.slice();return gt(o,l,r),o.forEach((R,Ri)=>{if(Y[Ri]===R)return;let ge=R.drag===i,$t=ge?z:$,fe=ge?i.getPlaceholderElement():R.drag.getRootElement();R.offset+=$t;let ve=Math.round(R.offset*(1/R.drag.scale));s?(fe.style.transform=Nt(`translate3d(${ve}px, 0, 0)`,R.initialTransform),bt(R.clientRect,0,$t)):(fe.style.transform=Nt(`translate3d(0, ${ve}px, 0)`,R.initialTransform),bt(R.clientRect,$t,0))}),this._previousSwap.overlaps=ie(f,t,e),this._previousSwap.drag=c.drag,this._previousSwap.delta=s?n.x:n.y,{previousIndex:l,currentIndex:r}}enter(i,t,e,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(i,t,e):n,r=this._activeDraggables,s=r.indexOf(i),l=i.getPlaceholderElement(),c=r[o];if(c===i&&(c=r[o+1]),!c&&(o==null||o===-1||o<r.length-1)&&this._shouldEnterAsFirstChild(t,e)&&(c=r[0]),s>-1&&r.splice(s,1),c&&!this._dragDropRegistry.isDragging(c)){let d=c.getRootElement();d.parentElement.insertBefore(l,d),r.splice(o,0,i)}else this._element.appendChild(l),r.push(i);l.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables?.forEach(i=>{let t=i.getRootElement();if(t){let e=this._itemPositions.find(n=>n.drag===i)?.initialTransform;t.style.transform=e||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(e=>e.drag===i)}updateOnScroll(i,t){this._itemPositions.forEach(({clientRect:e})=>{bt(e,i,t)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(i){this._element=i}_cacheItemPositions(){let i=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let e=t.getVisibleElement();return{drag:t,offset:0,initialTransform:e.style.transform||"",clientRect:le(e)}}).sort((t,e)=>i?t.clientRect.left-e.clientRect.left:t.clientRect.top-e.clientRect.top)}_getItemOffsetPx(i,t,e){let n=this.orientation==="horizontal",o=n?t.left-i.left:t.top-i.top;return e===-1&&(o+=n?t.width-i.width:t.height-i.height),o}_getSiblingOffsetPx(i,t,e){let n=this.orientation==="horizontal",o=t[i].clientRect,r=t[i+e*-1],s=o[n?"width":"height"]*e;if(r){let l=n?"left":"top",c=n?"right":"bottom";e===-1?s-=r.clientRect[l]-o[c]:s+=o[l]-r.clientRect[c]}return s}_shouldEnterAsFirstChild(i,t){if(!this._activeDraggables.length)return!1;let e=this._itemPositions,n=this.orientation==="horizontal";if(e[0].drag!==this._activeDraggables[0]){let r=e[e.length-1].clientRect;return n?i>=r.right:t>=r.bottom}else{let r=e[0].clientRect;return n?i<=r.left:t<=r.top}}_getItemIndexFromPointerPosition(i,t,e,n){let o=this.orientation==="horizontal",r=this._itemPositions.findIndex(({drag:s,clientRect:l})=>{if(s===i)return!1;if(n){let c=o?n.x:n.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):e>=Math.floor(l.top)&&e<Math.floor(l.bottom)});return r===-1||!this._sortPredicate(r,i)?-1:r}},oe=class{constructor(i,t){this._document=i,this._dragDropRegistry=t,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(i){let t=this._element.childNodes;this._relatedNodes=[];for(let e=0;e<t.length;e++){let n=t[e];this._relatedNodes.push([n,n.nextSibling])}this.withItems(i)}sort(i,t,e,n){let o=this._getItemIndexFromPointerPosition(i,t,e),r=this._previousSwap;if(o===-1||this._activeItems[o]===i)return null;let s=this._activeItems[o];if(r.drag===s&&r.overlaps&&r.deltaX===n.x&&r.deltaY===n.y)return null;let l=this.getItemIndex(i),c=i.getPlaceholderElement(),d=s.getRootElement();o>l?d.after(c):d.before(c),gt(this._activeItems,l,o);let f=this._getRootNode().elementFromPoint(t,e);return r.deltaX=n.x,r.deltaY=n.y,r.drag=s,r.overlaps=d===f||d.contains(f),{previousIndex:l,currentIndex:o}}enter(i,t,e,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(i,t,e):n;o===-1&&(o=this._getClosestItemIndexToPointer(i,t,e));let r=this._activeItems[o],s=this._activeItems.indexOf(i);s>-1&&this._activeItems.splice(s,1),r&&!this._dragDropRegistry.isDragging(r)?(this._activeItems.splice(o,0,i),r.getRootElement().before(i.getPlaceholderElement())):(this._activeItems.push(i),this._element.appendChild(i.getPlaceholderElement()))}withItems(i){this._activeItems=i.slice()}withSortPredicate(i){this._sortPredicate=i}reset(){let i=this._element,t=this._previousSwap;for(let e=this._relatedNodes.length-1;e>-1;e--){let[n,o]=this._relatedNodes[e];n.parentNode===i&&n.nextSibling!==o&&(o===null?i.appendChild(n):o.parentNode===i&&i.insertBefore(n,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(i){return this._activeItems.indexOf(i)}updateOnScroll(){this._activeItems.forEach(i=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(i){i!==this._element&&(this._element=i,this._rootNode=void 0)}_getItemIndexFromPointerPosition(i,t,e){let n=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(e)),o=n?this._activeItems.findIndex(r=>{let s=r.getRootElement();return n===s||s.contains(n)}):-1;return o===-1||!this._sortPredicate(o,i)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=Tt(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(i,t,e){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,o=-1;for(let r=0;r<this._activeItems.length;r++){let s=this._activeItems[r];if(s!==i){let{x:l,y:c}=s.getRootElement().getBoundingClientRect(),d=Math.hypot(t-l,e-c);d<n&&(n=d,o=r)}}return o}},di=.05,_i=.05,F=function(a){return a[a.NONE=0]="NONE",a[a.UP=1]="UP",a[a.DOWN=2]="DOWN",a}(F||{}),I=function(a){return a[a.NONE=0]="NONE",a[a.LEFT=1]="LEFT",a[a.RIGHT=2]="RIGHT",a}(I||{}),re=class{constructor(i,t,e,n,o){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new b,this.entered=new b,this.exited=new b,this.dropped=new b,this.sorted=new b,this.receivingStarted=new b,this.receivingStopped=new b,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=X.EMPTY,this._verticalScrollDirection=F.NONE,this._horizontalScrollDirection=I.NONE,this._stopScrollTimers=new b,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),ye(0,Ce).pipe(nt(this._stopScrollTimers)).subscribe(()=>{let s=this._scrollNode,l=this.autoScrollStep;this._verticalScrollDirection===F.UP?s.scrollBy(0,-l):this._verticalScrollDirection===F.DOWN&&s.scrollBy(0,l),this._horizontalScrollDirection===I.LEFT?s.scrollBy(-l,0):this._horizontalScrollDirection===I.RIGHT&&s.scrollBy(l,0)})};let r=this.element=H(i);this._document=e,this.withOrientation("vertical").withElementContainer(r),t.registerDropContainer(this),this._parentPositions=new At(e)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,t,e,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(i)),this._sortStrategy.enter(i,t,e,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,t,e,n,o,r,s,l={}){this._reset(),this.dropped.next({item:i,currentIndex:t,previousIndex:e,container:this,previousContainer:n,isPointerOverContainer:o,distance:r,dropPoint:s,event:l})}withItems(i){let t=this._draggables;return this._draggables=i,i.forEach(e=>e._withDropContainer(this)),this.isDragging()&&(t.filter(n=>n.isDragging()).every(n=>i.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._direction=i,this._sortStrategy instanceof jt&&(this._sortStrategy.direction=i),this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){if(i==="mixed")this._sortStrategy=new oe(this._document,this._dragDropRegistry);else{let t=new jt(this._dragDropRegistry);t.direction=this._direction,t.orientation=i,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,e)=>this.sortPredicate(t,e,this)),this}withScrollableParents(i){let t=this._container;return this._scrollableElements=i.indexOf(t)===-1?[t,...i]:i.slice(),this}withElementContainer(i){if(i===this._container)return this;let t=H(this.element),e=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(i);return e>-1&&this._scrollableElements.splice(e,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(i),this._cachedShadowRoot=null,this._scrollableElements.unshift(i),this._container=i,this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,t,e,n){if(this.sortingDisabled||!this._domRect||!ti(this._domRect,di,t,e))return;let o=this._sortStrategy.sort(i,t,e,n);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,t){if(this.autoScrollDisabled)return;let e,n=F.NONE,o=I.NONE;if(this._parentPositions.positions.forEach((r,s)=>{s===this._document||!r.clientRect||e||ti(r.clientRect,di,i,t)&&([n,o]=Ni(s,r.clientRect,this._direction,i,t),(n||o)&&(e=s))}),!n&&!o){let{width:r,height:s}=this._viewportRuler.getViewportSize(),l={width:r,height:s,top:0,right:r,bottom:s,left:0};n=ui(l,t),o=bi(l,i),e=window}e&&(n!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||e!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=o,this._scrollNode=e,(n||o)&&e?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let i=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let i=this._container.style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(i,t){return this._domRect!=null&&ie(this._domRect,i,t)}_getSiblingContainerFromPosition(i,t,e){return this._siblings.find(n=>n._canReceive(i,t,e))}_canReceive(i,t,e){if(!this._domRect||!ie(this._domRect,t,e)||!this.enterPredicate(i,this))return!1;let n=this._getShadowRoot().elementFromPoint(t,e);return n?n===this._container||this._container.contains(n):!1}_startReceiving(i,t){let e=this._activeSiblings;!e.has(i)&&t.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(e.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:t}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(i);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let i=Tt(this._container);this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let i=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,i))}};function ui(a,i){let{top:t,bottom:e,height:n}=a,o=n*_i;return i>=t-o&&i<=t+o?F.UP:i>=e-o&&i<=e+o?F.DOWN:F.NONE}function bi(a,i){let{left:t,right:e,width:n}=a,o=n*_i;return i>=t-o&&i<=t+o?I.LEFT:i>=e-o&&i<=e+o?I.RIGHT:I.NONE}function Ni(a,i,t,e,n){let o=ui(i,n),r=bi(i,e),s=F.NONE,l=I.NONE;if(o){let c=a.scrollTop;o===F.UP?c>0&&(s=F.UP):a.scrollHeight-c>a.clientHeight&&(s=F.DOWN)}if(r){let c=a.scrollLeft;t==="rtl"?r===I.RIGHT?c<0&&(l=I.RIGHT):a.scrollWidth+c>a.clientWidth&&(l=I.LEFT):r===I.LEFT?c>0&&(l=I.LEFT):a.scrollWidth-c>a.clientWidth&&(l=I.RIGHT)}return[s,l]}var Ft=mt({passive:!1,capture:!0}),Ot=new Set,Bi=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=W({type:a,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[Z],decls:0,vars:0,template:function(e,n){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}}return a})(),Vi=(()=>{class a{constructor(t,e){this._ngZone=t,this._appRef=w(Ee),this._environmentInjector=w(De),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=N([]),this._globalListeners=new Map,this._draggingPredicate=n=>n.isDragging(),this.pointerMove=new b,this.pointerUp=new b,this.scroll=new b,this._preventDefaultWhileDragging=n=>{this._activeDragInstances().length>0&&n.preventDefault()},this._persistentTouchmoveListener=n=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Ft)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ft)}startDragging(t,e){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._loadResets(),this._activeDragInstances.update(n=>[...n,t]),this._activeDragInstances().length===1)){let n=e.type.startsWith("touch");this._globalListeners.set(n?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ft}),n||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:Ft}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,r)=>{this._document.addEventListener(r,o.handler,o.options)})})}}stopDragging(t){this._activeDragInstances.update(e=>{let n=e.indexOf(t);return n>-1?(e.splice(n,1),[...e]):e}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let e=[this.scroll];return t&&t!==this._document&&e.push(new Gt(n=>this._ngZone.runOutsideAngular(()=>{let r=s=>{this._activeDragInstances().length&&n.next(s)};return t.addEventListener("scroll",r,!0),()=>{t.removeEventListener("scroll",r,!0)}}))),vt(...e)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}_loadResets(){if(!Ot.has(this._appRef)){Ot.add(this._appRef);let t=Me(Bi,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{Ot.delete(this._appRef),Ot.size===0&&t.destroy()})}}static{this.\u0275fac=function(e){return new(e||a)(U(ot),U(Dt))}}static{this.\u0275prov=at({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),ji={dragStartThreshold:5,pointerDirectionChangeThreshold:5},de=(()=>{class a{constructor(t,e,n,o){this._document=t,this._ngZone=e,this._viewportRuler=n,this._dragDropRegistry=o}createDrag(t,e=ji){return new ae(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new re(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(e){return new(e||a)(U(Dt),U(ot),U(Ae),U(Vi))}}static{this.\u0275prov=at({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Ht=new G("CDK_DRAG_PARENT");var gi=new G("CdkDragHandle"),fi=(()=>{class a{get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}constructor(t,e){this.element=t,this._parentDrag=e,this._stateChanges=new b,this._disabled=!1,e?._addHandle(this)}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static{this.\u0275fac=function(e){return new(e||a)(v(rt),v(Ht,12))}}static{this.\u0275dir=Q({type:a,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",K]},standalone:!0,features:[B([{provide:gi,useExisting:a}]),J]})}}return a})(),vi=new G("CDK_DRAG_CONFIG"),Hi="cdk-drag",Ci=new G("CdkDropList"),yi=(()=>{class a{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}constructor(t,e,n,o,r,s,l,c,d,f,E){this.element=t,this.dropContainer=e,this._ngZone=o,this._viewContainerRef=r,this._dir=l,this._changeDetectorRef=d,this._selfHandle=f,this._parentDrag=E,this._destroyed=new b,this._handles=new et([]),this.scale=1,this.started=new O,this.released=new O,this.ended=new O,this.entered=new O,this.exited=new O,this.dropped=new O,this.moved=new Gt(z=>{let $=this._dragRef.moved.pipe(it(Y=>({source:this,pointerPosition:Y.pointerPosition,event:Y.event,delta:Y.delta,distance:Y.distance}))).subscribe(z);return()=>{$.unsubscribe()}}),this._injector=w(Ie),this._dragRef=c.createDrag(t,{dragStartThreshold:s&&s.dragStartThreshold!=null?s.dragStartThreshold:5,pointerDirectionChangeThreshold:s&&s.pointerDirectionChangeThreshold!=null?s.pointerDirectionChangeThreshold:5,zIndex:s?.zIndex}),this._dragRef.data=this,a._dragInstances.push(this),s&&this._assignDefaults(s),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(nt(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Se(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let t=a._dragInstances.indexOf(this);t>-1&&a._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let e=this._handles.getValue();e.push(t),this._handles.next(e)}_removeHandle(t){let e=this._handles.getValue(),n=e.indexOf(t);n>-1&&(e.splice(n,1),this._handles.next(e))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,e=t;this.rootElementSelector&&(e=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(e||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):H(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let e=this._dir,n=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof n=="object"&&n?n:Kt(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(r).withPreviewContainer(this.previewContainer||"global"),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(T(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let e=this.element.nativeElement.parentElement;for(;e;){if(e.classList.contains(Hi)){t.withParent(a._dragInstances.find(n=>n.element.nativeElement===e)?._dragRef||null);break}e=e.parentElement}})}_handleEvents(t){t.started.subscribe(e=>{this.started.emit({source:this,event:e.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(e=>{this.released.emit({source:this,event:e.event})}),t.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance,dropPoint:e.dropPoint,event:e.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),t.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),t.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance,dropPoint:e.dropPoint,event:e.event})})}_assignDefaults(t){let{lockAxis:e,dragStartDelay:n,constrainPosition:o,previewClass:r,boundaryElement:s,draggingDisabled:l,rootElementSelector:c,previewContainer:d}=t;this.disabled=l??!1,this.dragStartDelay=n||0,e&&(this.lockAxis=e),o&&(this.constrainPosition=o),r&&(this.previewClass=r),s&&(this.boundaryElement=s),c&&(this.rootElementSelector=c),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe(we(t=>{let e=t.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&e.push(this.element),this._dragRef.withHandles(e)}),xe(t=>vt(...t.map(e=>e._stateChanges.pipe(Ut(e))))),nt(this._destroyed)).subscribe(t=>{let e=this._dragRef,n=t.element.nativeElement;t.disabled?e.disableHandle(n):e.enableHandle(n)})}static{this.\u0275fac=function(e){return new(e||a)(v(rt),v(Ci,12),v(Dt),v(ot),v(qt),v(vi,8),v(Yt,8),v(de),v(wt),v(gi,10),v(Ht,12))}}static{this.\u0275dir=Q({type:a,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,n){e&2&&j("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",K],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Re]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[B([{provide:Ht,useExisting:a}]),J,Wt]})}}return a})(),se=new G("CdkDropListGroup"),xi=(()=>{class a{constructor(){this._items=new Set,this.disabled=!1}ngOnDestroy(){this._items.clear()}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275dir=Q({type:a,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:[2,"cdkDropListGroupDisabled","disabled",K]},exportAs:["cdkDropListGroup"],standalone:!0,features:[B([{provide:se,useExisting:a}]),J]})}}return a})(),zi=0,wi=(()=>{class a{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}constructor(t,e,n,o,r,s,l){this.element=t,this._changeDetectorRef=n,this._scrollDispatcher=o,this._dir=r,this._group=s,this._destroyed=new b,this.connectedTo=[],this.id=`cdk-drop-list-${zi++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new O,this.entered=new O,this.exited=new O,this.sorted=new O,this._unsortedItems=new Set,this._dropListRef=e.createDropList(t),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(c,d)=>this.enterPredicate(c.data,d.data),this._dropListRef.sortPredicate=(c,d,f)=>this.sortPredicate(c,d.data,f.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),a._dropLists.push(this),s&&s._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,e)=>t._dragRef.getVisibleElement().compareDocumentPosition(e._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=a._dropLists.indexOf(this);t>-1&&a._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Ut(this._dir.value),nt(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{let e=Le(this.connectedTo).map(n=>{if(typeof n=="string"){let o=a._dropLists.find(r=>r.id===n);return o}return n});if(this._group&&this._group._items.forEach(n=>{e.indexOf(n)===-1&&e.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(n)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=Kt(this.autoScrollStep,2),t.connectedTo(e.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),t.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),t.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance,dropPoint:e.dropPoint,event:e.event}),this._changeDetectorRef.markForCheck()}),vt(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:e,draggingDisabled:n,sortingDisabled:o,listAutoScrollDisabled:r,listOrientation:s}=t;this.disabled=n??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=r??!1,this.orientation=s||"vertical",e&&(this.lockAxis=e)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}static{this.\u0275fac=function(e){return new(e||a)(v(rt),v(de),v(wt),v(Fe),v(Yt,8),v(se,12),v(vi,8))}}static{this.\u0275dir=Q({type:a,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,n){e&2&&(Zt("id",n.id),j("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",K],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",K],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",K],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[B([{provide:se,useValue:void 0},{provide:Ci,useExisting:a}]),J]})}}return a})();var $i=new G("CdkDragPlaceholder"),Di=(()=>{class a{constructor(t){this.templateRef=t,this._drag=w(Ht,{optional:!0}),this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static{this.\u0275fac=function(e){return new(e||a)(v(Qt))}}static{this.\u0275dir=Q({type:a,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},standalone:!0,features:[B([{provide:$i,useExisting:a}])]})}}return a})();var Ii=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=yt({type:a})}static{this.\u0275inj=Ct({providers:[de],imports:[Ne]})}}return a})();var ft=(()=>{class a{constructor(){this._navbarService=w(Et),this._networkService=w(We),this._menu$=new et(void 0),this.template=N({}),this.loaded$=this._menu$.asObservable().pipe(it(t=>!!t)),this.store$=this._menu$.asObservable().pipe(it(t=>t?.store)),this.content$=new et([]),this.deletedItems=[],this.deletedSubcategories=[]}getMenuById(t){this._networkService.post(te.MENU.menuById,{menuId:t}).pipe(T(1)).subscribe({next:e=>{if(!e)this._navbarService.navigateTo(_t.LAYOUT.children.HOME.route);else if(e.data){this.template.set(e.data.template||{}),this._menu$.next(e.data);let n=e.data,o=n.sub_categories.sort((r,s)=>r.order-s.order).map(r=>(r.items=n.items.filter(s=>s.subcategoryId===r._id).sort((s,l)=>s.order-l.order).map((s,l)=>A(x({},s),{order:l+1}))||[],r));this.content$.next(o||[]),this.deletedItems=[],this.deletedSubcategories=[]}},error:()=>{this._navbarService.navigateTo(_t.LAYOUT.children.HOME.route)}})}saveMenu(t,e){this._networkService.patch(te.MENU.bulkSave,A(x({},t),{deletedItems:this.deletedItems,deletedSubcategories:this.deletedSubcategories})).pipe(T(1)).subscribe(n=>{n&&this.getMenuById(e)})}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=at({token:a,factory:a.\u0275fac})}}return a})();var he=(a,i)=>i._id,me=()=>({icon:"icon_menu",color:"var(--mdc-text-button-label-text-color, var(--mat-app-primary))"}),pe=()=>({icon:"icon_eye_off",color:"#ba1a1a"}),Ui=()=>({text:"Add Item"}),Ti=()=>({icon:"icon_plus_circle"}),zt=(a,i)=>({label:a,prefixIcon:i,matType:"mat-icon-button"}),ki=()=>({text:"Edit Category"}),_e=()=>({icon:"icon_edit"}),Si=()=>({text:"Delete Category"}),ue=()=>({icon:"icon_delete"}),be=(a,i)=>({label:a,prefixIcon:i,color:"warn",matType:"mat-icon-button"}),Pi=()=>({addClass:"text-break border border-1 py-0 px-1"}),Wi=()=>({text:"Edit Item"}),Qi=()=>({text:"Delete Item"}),qi=()=>({icon:"icon_error_triangle"}),Zi=()=>({text:"Add First Category"}),Ki=(a,i)=>({label:a,prefixIcon:i,matType:"mat-flat-button"});function Yi(a,i){a&1&&M(0,"div",19)}function Xi(a,i){a&1&&M(0,"ks-base-icon",11),a&2&&g("config",u(1,me))}function Ji(a,i){a&1&&M(0,"ks-base-icon",14),a&2&&g("config",u(1,pe))}function tn(a,i){if(a&1){let t=P();_(0,"ks-base-button",20),D("onClick",function(){k(t);let n=m().$implicit,o=m(5);return S(o.addEditItem(n))}),p()}a&2&&g("config",L(3,zt,u(1,Ui),u(2,Ti)))}function en(a,i){if(a&1){let t=P();_(0,"ks-base-button",20),D("onClick",function(){k(t);let n=m().$implicit,o=m(5);return S(o.addEditSubCategory(n))}),p()}a&2&&g("config",L(3,zt,u(1,ki),u(2,_e)))}function nn(a,i){if(a&1){let t=P();_(0,"ks-base-button",20),D("onClick",function(){k(t);let n=m().$implicit,o=m(5);return S(o.deleteCategory(n))}),p()}a&2&&g("config",L(3,be,u(1,Si),u(2,ue)))}function an(a,i){a&1&&M(0,"ks-base-icon",11),a&2&&g("config",u(1,me))}function on(a,i){a&1&&M(0,"ks-base-icon",14),a&2&&g("config",u(1,pe))}function rn(a,i){if(a&1){let t=P();_(0,"ks-base-button",20),D("onClick",function(){k(t);let n=m().$implicit,o=m().$implicit,r=m(5);return S(r.addEditItem(o,n))}),p()}a&2&&g("config",L(3,zt,u(1,Wi),u(2,_e)))}function sn(a,i){if(a&1){let t=P();_(0,"ks-base-button",20),D("onClick",function(){k(t);let n=m().$implicit,o=m().$implicit,r=m(5);return S(r.deleteItem(o,n))}),p()}a&2&&g("config",L(3,be,u(1,Qi),u(2,ue)))}function ln(a,i){if(a&1&&(_(0,"div",18)(1,"ks-base-card",11)(2,"div",21)(3,"div",10),y(4,an,1,2,"ks-base-icon",11),p(),_(5,"div",12)(6,"div",13),q(7),p(),y(8,on,1,2,"ks-base-icon",14),p(),_(9,"div",22),y(10,rn,1,6,"ks-base-button",11)(11,sn,1,6,"ks-base-button",11),p()()()()),a&2){let t=i.$implicit,e=m(6);h(),g("config",u(8,Pi)),h(2),j("move",e.currentScreen.update),h(),C(e.currentScreen.update?4:-1),h(3),ct(t.label),h(),C(t.hide?8:-1),h(2),C(e.currentScreen.update?10:-1),h(),C(e.currentScreen.delete?11:-1)}}function cn(a,i){if(a&1){let t=P();_(0,"mat-expansion-panel",6,0),y(2,Yi,1,0,"div",7),_(3,"mat-expansion-panel-header")(4,"mat-panel-title",8)(5,"div",9)(6,"div",10),y(7,Xi,1,2,"ks-base-icon",11),p(),_(8,"div",12)(9,"div",13),q(10),p(),y(11,Ji,1,2,"ks-base-icon",14),p()()()(),_(12,"div",15),D("cdkDropListDropped",function(n){let o=k(t).$implicit,r=m(5);return S(r.dropItem(n,o._id))}),_(13,"div",5)(14,"div",16)(15,"div",17),y(16,tn,1,6,"ks-base-button",11)(17,en,1,6,"ks-base-button",11)(18,nn,1,6,"ks-base-button",11),p()()(),_(19,"div",5)(20,"div",16),st(21,ln,12,9,"div",18,he),p()()()()}if(a&2){let t=i.$implicit,e=m(5);h(6),j("move",e.currentScreen.update),h(),C(e.currentScreen.update?7:-1),h(3),ct(t.label),h(),C(t.hide?11:-1),h(),g("cdkDropListData",t.items)("cdkDropListDisabled",!e.currentScreen.update),h(4),C(e.currentScreen.insert?16:-1),h(),C(e.currentScreen.update?17:-1),h(),C(e.currentScreen.delete?18:-1),h(3),lt(t.items)}}function dn(a,i){if(a&1&&(_(0,"mat-accordion",4),st(1,cn,23,10,"mat-expansion-panel",6,he),p()),a&2){let t=m(3);h(),lt(t)}}function hn(a,i){a&1&&M(0,"ks-base-icon",11),a&2&&g("config",u(1,me))}function mn(a,i){a&1&&M(0,"ks-base-icon",14),a&2&&g("config",u(1,pe))}function pn(a,i){if(a&1){let t=P();_(0,"ks-base-button",20),D("onClick",function(){k(t);let n=m().$implicit,o=m(5);return S(o.addEditSubCategory(n))}),p()}a&2&&g("config",L(3,zt,u(1,ki),u(2,_e)))}function _n(a,i){if(a&1){let t=P();_(0,"ks-base-button",20),D("onClick",function(){k(t);let n=m().$implicit,o=m(5);return S(o.deleteCategory(n))}),p()}a&2&&g("config",L(3,be,u(1,Si),u(2,ue)))}function un(a,i){if(a&1&&(_(0,"div",18)(1,"ks-base-card",11)(2,"div",21)(3,"div",10),y(4,hn,1,2,"ks-base-icon",11),p(),_(5,"div",12)(6,"div",13),q(7),p(),y(8,mn,1,2,"ks-base-icon",14),p(),_(9,"div",22),y(10,pn,1,6,"ks-base-button",11)(11,_n,1,6,"ks-base-button",11),p()()()()),a&2){let t=i.$implicit,e=m(5);h(),g("config",u(8,Pi)),h(2),j("move",e.currentScreen.update),h(),C(e.currentScreen.update?4:-1),h(3),ct(t.label),h(),C(t.hide?8:-1),h(2),C(e.currentScreen.update?10:-1),h(),C(e.currentScreen.delete?11:-1)}}function bn(a,i){if(a&1&&(_(0,"div",5)(1,"div",16),st(2,un,12,9,"div",18,he),p()()),a&2){let t=m(3);h(2),lt(t)}}function gn(a,i){if(a&1){let t=P();_(0,"div",3),D("cdkDropListDropped",function(n){k(t);let o=m(3);return S(o.drop(n))}),y(1,dn,3,0,"mat-accordion",4)(2,bn,4,0,"div",5),p()}if(a&2){let t=m(3);g("cdkDropListDisabled",!t.currentScreen.update),h(),C(t.template().menu_item?1:2)}}function fn(a,i){if(a&1){let t=P();_(0,"div",26)(1,"ks-base-button",20),D("onClick",function(){k(t);let n=m(4);return S(n.addEditSubCategory())}),p()()}a&2&&(h(),g("config",L(3,Ki,u(1,Zi),u(2,Ti))))}function vn(a,i){if(a&1&&(_(0,"div",2)(1,"div",23),M(2,"ks-base-icon",24),q(3," No Categories Found "),p(),_(4,"p",25),q(5),p(),y(6,fn,2,6,"div",26),p()),a&2){let t=m(3);h(2),g("config",u(3,qi)),h(3),Pe(" It looks like you haven\u2019t added any categories yet. ",t.currentScreen.insert?"Click the button below to get started by adding your first category!":""," "),h(),C(t.currentScreen.insert?6:-1)}}function Cn(a,i){if(a&1&&(y(0,gn,3,2,"div",1),dt(1,"async"),y(2,vn,7,4,"div",2)),a&2){let t=m(),e=m();C(t.length?0:ht(1,1,e.loaded$)?2:-1)}}function yn(a,i){if(a&1&&y(0,Cn,3,3),a&2){let t=m();C(t.template().menu_subcategory?0:-1)}}var Ei=(()=>{class a{constructor(){this._destroyRef=w(xt),this._dialog=w(St),this._menuService=w(ft),this.editMade=Te(),this.addCategory$=ke.required(),this.loaded$=this._menuService.loaded$,this.template=this._menuService.template,this.categories$=this._menuService.content$,this.currentScreen=Rt("menu_crud")}ngOnInit(){this.addCategory$().pipe(kt(this._destroyRef)).subscribe(()=>{this.addEditSubCategory()})}drop(t){this.categories$.pipe(T(1)).subscribe(e=>{gt(e,t.previousIndex,t.currentIndex),e.forEach((n,o)=>{n.order=o+1})}),this.editMade.emit()}dropItem(t,e){if(t.previousContainer===t.container)gt(t.container.data,t.previousIndex,t.currentIndex),t.container.data.forEach((n,o)=>{n.order=o+1});else{pi(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex);let n=t.container.data[t.currentIndex];n&&(n.subcategoryId=e),t.previousContainer.data.forEach((o,r)=>{o.order=r+1}),t.container.data.forEach((o,r)=>{o.order=r+1})}this.editMade.emit()}addEditSubCategory(t){let e=this.template(),n={hideClearButton:!0,title:{text:t?"Edit Category":"Add Category"},form:{value:t,fields:[{name:"label",label:{text:"Category Name"},required:!0,type:"text"},{name:"img",label:{text:"Icon"},type:"text",hide:!e.subcategory_img},{name:"bgImg",label:{text:"Image"},type:"text",hide:!e.subcategory_bgImg},{name:"pageNb",label:{text:"Page Number"},type:"number",hide:!e.subcategory_pageNb,extraValidators:[Jt.min(1)]},{name:"hide",label:{text:"Is Hidden"},type:"checkbox"}]}};this._dialog.openFormPopup(n,"900px").afterClosed().pipe(T(1)).subscribe(o=>{o&&(t?V.UpdateArrayBehaviorSubject(this.categories$,x(x({},t),o),"edit"):V.UpdateArrayBehaviorSubject(this.categories$,A(x({},o),{_id:"newSubcategory"+new Date().getTime().toString(),items:[],order:new Date().getTime()}),"add"),this.editMade.emit())})}addEditItem(t,e){let n=this.template(),o={hideClearButton:!0,title:{text:e?"Edit Item":"Add Item"},form:{value:e,fields:[{name:"label",label:{text:"Item Name"},required:!0,type:"text"},{name:"price",label:{text:"Price"},type:"number"},{name:"description",label:{text:"Description"},type:"textaria",hide:!n.item_description},{name:"unit",label:{text:"Unit"},type:"text",hide:!n.item_unit},{name:"img",label:{text:"Icon"},type:"text",hide:!n.item_img},{name:"bgImg",label:{text:"Image"},type:"text",hide:!n.item_bgImg},{name:"calories",label:{text:"Calories"},type:"number",extraValidators:[Jt.min(0)],hide:!n.item_calories},{name:"hide",label:{text:"Is Hidden"},type:"checkbox"},{name:"is_Starred",label:{text:"Is Starred"},type:"checkbox",hide:!n.item_is_Starred},{name:"is_New",label:{text:"Is New"},type:"checkbox",hide:!n.item_is_New}]}};this._dialog.openFormPopup(o,"900px").afterClosed().pipe(T(1)).subscribe(r=>{r&&(e?V.UpdateArray(t.items,x(x({},e),r),"edit"):V.UpdateArray(t.items,A(x({},r),{_id:"newItem"+new Date().getTime().toString(),order:new Date().getTime()}),"add"),V.UpdateArrayBehaviorSubject(this.categories$,t,"edit"),this.editMade.emit())})}deleteCategory(t){this._dialog.openConfirmPopup({title:{text:"Confirm Delete"},message:{text:"Are you sure you want to delete this category? This action will remove all items associated with it."}},"500px").afterClosed().pipe(T(1)).subscribe(e=>{e&&(V.UpdateArrayBehaviorSubject(this.categories$,t,"delete"),this.editMade.emit(),t._id.startsWith("new")||this._menuService.deletedSubcategories.push(t._id),t.items.forEach(n=>{n._id.startsWith("new")||this._menuService.deletedItems.push(n._id)}))})}deleteItem(t,e){this._dialog.openConfirmPopup({title:{text:"Confirm Delete"},message:{text:"Are you sure you want to delete this item?"}},"500px").afterClosed().pipe(T(1)).subscribe(n=>{n&&(V.UpdateArray(t.items,e,"delete"),V.UpdateArrayBehaviorSubject(this.categories$,t,"edit"),this.editMade.emit(),e._id.startsWith("new")||this._menuService.deletedItems.push(e._id))})}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=W({type:a,selectors:[["ks-solutions-content"]],inputs:{addCategory$:[1,"addCategory$"]},outputs:{editMade:"editMade"},standalone:!0,features:[Z],decls:2,vars:3,consts:[["expansionPanel",""],["cdkDropListGroup","","cdkDropList","","cdkScrollable","",1,"scrollable-container",3,"cdkDropListDisabled"],[1,"mx-auto","text-center","pt-4",2,"max-width","400px"],["cdkDropListGroup","","cdkDropList","","cdkScrollable","",1,"scrollable-container",3,"cdkDropListDropped","cdkDropListDisabled"],["multi",""],[1,"container-fluid"],["cdkDrag","",1,"border","border-1"],["class","border boorder-3 border-danger",4,"cdkDragPlaceholder"],[1,"h5","mb-0"],[2,"display","grid","grid-template-columns","auto 1fr"],["cdkDragHandle","",1,"p-2","text-primary","d-flex","align-items-center","h-100"],[3,"config"],[1,"d-flex","align-items-center","h-100"],[1,"text-break"],[1,"ms-2",3,"config"],["cdkDropList","",3,"cdkDropListDropped","cdkDropListData","cdkDropListDisabled"],[1,"row"],[1,"col-12","py-3","d-flex","gap-2","justify-content-end","flex-wrap"],["cdkDrag","",1,"col-12","mb-2","card-hover"],[1,"border","boorder-3","border-danger"],[3,"onClick","config"],[2,"display","grid","grid-template-columns","auto 1fr auto","min-height","40px"],[1,"p-2","text-primary","d-flex","align-items-center","h-100"],[1,"h4","d-flex","align-items-center","justify-content-center"],[1,"me-3",3,"config"],[1,"mb-4",2,"color","#6c757d"],[1,"text-center"]],template:function(e,n){if(e&1&&(y(0,yn,1,1),dt(1,"async")),e&2){let o;C((o=ht(1,1,n.categories$))?0:-1,o)}},dependencies:[Ze,It,je,Ue,Ge,He,ze,$e,Pt,qe,Ii,Oe,wi,xi,yi,fi,Di],styles:["[_nghost-%COMP%]{--row-border: 1px solid rgb(193, 193, 193)}[_nghost-%COMP%]     .mat-expansion-panel-body{padding:0 0 8px!important}[_nghost-%COMP%]     .mat-expansion-panel-header{height:auto;min-height:var(--mat-expansion-header-collapsed-state-height);padding:0 12px 0 0}[_nghost-%COMP%]     .mat-expansion-panel-header.mat-expanded{height:auto;min-height:var(--mat-expansion-header-expanded-state-height)}.scrollable-container[_ngcontent-%COMP%]{max-height:calc(100dvh - 195px);overflow-y:auto;padding-top:10px;padding-bottom:10px}.move[_ngcontent-%COMP%]{cursor:move}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:12px}.card-hover[_ngcontent-%COMP%]    :hover .ks-base-card{border:1px solid var(--primary-color)!important}"],changeDetection:0})}}return a})();var xn=()=>({text:"Add Category"}),wn=()=>({icon:"icon_plus_circle"}),Dn=(a,i)=>({label:a,prefixIcon:i,matType:"mat-icon-button"});function In(a,i){if(a&1){let t=P();_(0,"ks-base-button",4),D("onClick",function(){k(t);let n=m(2);return S(n.addCategory$.next())}),p()}a&2&&g("config",L(3,Dn,u(1,xn),u(2,wn)))}function Tn(a,i){if(a&1&&(_(0,"div",0),y(1,In,1,6,"ks-base-button",3),dt(2,"async"),M(3,"ks-base-button",3),p()),a&2){let t,e=m();h(),C((t=ht(2,2,e.content$))!=null&&t.length?1:-1),h(2),g("config",e.buttonConfig())}}var Ka=(()=>{class a{constructor(){this._destroyRef=w(xt),this._dialog=w(St),this._menuService=w(ft),this._navService=w(Et),this._menuId="",this.currentScreen=Rt("menu_crud"),this.isNewStore=N(!1),this.showSaveButton=N(!1),this.addCategory$=new b,this.content$=this._menuService.content$,this.buttonConfig=N({label:{text:"Add Menu Info"},matType:"mat-flat-button",onClick:()=>{this._openMenu(this._store||{currency:"$",mainLang:"en",menuId:this._menuId,storeName:"",templateId:""})}})}ngOnInit(){this._menuId=this._navService.readUrlParams().MenuId,this._navService.updateNav({show:!0,back:!0,title:this.currentScreen.screenName,buttons:[{label:{text:"Save"},prefixIcon:{icon:"icon_save"},show:this.showSaveButton,onClick:()=>{this._save()}}]}),this._menuId?this._menuService.getMenuById(this._menuId):this._navService.navigateTo(_t.LAYOUT.children.HOME.route),this._menuService.store$.pipe(kt(this._destroyRef)).subscribe(t=>{t?._id?(this.isNewStore.set(!1),this._store=t,this.buttonConfig.update(e=>A(x({},e),{label:A(x({},e.label),{text:"Edit Menu Info"})}))):this.isNewStore.set(!0)})}_save(){if(!this._store){this._dialog.openConfirmPopup({title:{text:"Message"},message:{text:"You need to fill the menu info before saving!"},hideYesNo:!0});return}this._menuService.content$.pipe(T(1)).subscribe(t=>{t.forEach(n=>{n.menuId=this._menuId,n.items.forEach(o=>{o.menuId=this._menuId})});let e={store:this._store,sub_categories:t};this._menuService.saveMenu(e,this._menuId),this.showSaveButton.set(!1)})}_openMenu(t){let e={hideClearButton:!0,title:{text:t._id?"Edit Menu info":"Add Menu Info"},form:this._getForm(t)};this._dialog.openFormPopup(e,"95vw").afterClosed().pipe(T(1)).subscribe(n=>{if(n){this.showSaveButton.set(!0);let o={email:n.email,location:n.location,locationTranslation:n.locationTranslation,locationUrl:n.locationUrl,facebookUrl:n.facebookUrl,instagramUrl:n.instagramUrl,whatsappUrl:n.whatsappUrl};this._store=A(x(x({},this._store||{}),n),{sm:o})}})}_getForm(t){let e=this._menuService.template(),n=!e.menu_translation;return{value:x(x({},t),t.sm||{}),groups:[{id:3,name:{text:"General Info"},order:1},{id:2,name:{text:"Language"},order:2},{id:1,name:{text:"Social Media"},order:3}],fields:[{label:{text:"Menu Name"},name:"storeName",type:"text",required:!0,groupId:3},{label:{text:"Currency"},name:"currency",type:"select",options:[{name:"$",value:"$"},{name:"LL",value:"LL"}],required:!0,groupId:3},{label:{text:"Main Lang"},name:"mainLang",type:"select",options:[{name:"English",value:"en"},{name:"francais",value:"fr"},{name:"arabic",value:"ar"}],hide:n,groupId:2},{label:{text:"Quote"},name:"quote",type:"text",groupId:3,hide:!e.menu_quote},{label:{text:"About Us"},name:"aboutUs",type:"text",groupId:3,hide:!e.menu_aboutUs},{label:{text:"About Us Translation"},name:"aboutUsTranslation",type:"text",groupId:3,hide:n||!e.menu_aboutUs},{label:{text:"Store Logo"},name:"storeLogo",type:"text",groupId:3,hide:!e.menu_storeLogo},{label:{text:"Phone Number Link"},name:"phoneNumber",type:"text",groupId:1,hide:!e.menu_phoneNumber},{label:{text:"Displayed Phone Number"},name:"displayedPhoneNumber",type:"text",conditions:[{anyValue:!0,required:["phoneNumber"]}],groupId:1,hide:!e.menu_phoneNumber},{label:{text:"Languages"},hide:n,name:"languages",type:"select",multiple:!0,options:[{name:"English",value:"en"},{name:"francais",value:"fr"},{name:"arabic",value:"ar"}],groupId:2},{label:{text:"Email"},name:"email",type:"text",extraValidators:[Qe],groupId:1,hide:!e.menu_email},{label:{text:"Location"},name:"location",type:"text",groupId:1,hide:!e.menu_location},{label:{text:"Location translation"},hide:n||!e.menu_location,name:"locationTranslation",type:"text",groupId:1},{label:{text:"Location Link"},name:"locationUrl",type:"text",conditions:[{anyValue:!0,required:["location"]}],groupId:1,hide:!e.menu_location},{label:{text:"Facebook Link"},name:"facebookUrl",type:"text",groupId:1,hide:!e.menu_facebook},{label:{text:"Instagram Link"},name:"instagramUrl",type:"text",groupId:1,hide:!e.menu_instagram},{label:{text:"WhatsApp Link"},name:"whatsappUrl",type:"text",groupId:1,hide:!e.menu_whatsapp}]}}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=W({type:a,selectors:[["ks-solutions-menu"]],standalone:!0,features:[B([ft]),Z],decls:3,vars:2,consts:[[1,"text-end","d-flex","align-items-center","justify-content-end","gap-2"],[1,"pt-2"],[3,"editMade","addCategory$"],[3,"config"],[3,"onClick","config"]],template:function(e,n){e&1&&(y(0,Tn,4,4,"div",0),_(1,"div",1)(2,"ks-solutions-content",2),D("editMade",function(){return n.showSaveButton.set(!0)}),p()()),e&2&&(C(n.currentScreen.update&&!n.isNewStore()||n.currentScreen.insert&&n.isNewStore()?0:-1),h(2),g("addCategory$",n.addCategory$))},dependencies:[Ke,Ei,Pt,It],changeDetection:0})}}return a})();export{Ka as MenuComponent};
