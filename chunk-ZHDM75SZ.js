import{a as L}from"./chunk-JHOHYJWD.js";import{a as ni}from"./chunk-ZAKCWEXA.js";import{a as Ct}from"./chunk-BLGJQ3NA.js";import{a as he}from"./chunk-MIQK74YD.js";import{a as ht}from"./chunk-XELMOVSA.js";import"./chunk-HMNUYURD.js";import{a as Nt}from"./chunk-N2PVEWVS.js";import{C as le,N as Lt,O as Ft,Q as Ye,R as Xe,S as Je,T as ti,U as Ot,aa as dt,b as se,c as ze,d as W,da as ei,f as ft,g as Rt,h as vt,ha as ii,i as ce,j as Ge,k as Mt,ka as At,l as Ue,m as We,na as lt,q as Qe,r as qe,ra as Bt,t as de,v as Ke,w as Ze}from"./chunk-MMBMDBOW.js";import"./chunk-CARY4E7O.js";import"./chunk-4KKA7PE6.js";import{$ as _t,Ab as f,Db as Ve,Ea as Ae,F as Me,Fa as St,Fc as G,G as Dt,Gc as U,Ha as V,Hb as re,Ia as bt,Ib as b,Ka as Be,Kb as j,La as Ne,Ma as gt,N as w,Nc as je,Ob as g,Qc as Pt,Rb as J,Sb as tt,Tb as p,Tc as it,Ub as h,Uc as He,Vb as P,Yc as $e,Z as ie,Zb as S,_ as Le,a as x,ac as I,ad as Et,b as A,ba as Fe,cc as m,ea as ut,fa as kt,ha as Z,i as ot,ib as l,id as ct,ja as Y,jb as v,k as ee,ka as D,lb as ae,n as C,nc as M,o as K,oa as H,oc as et,pa as Tt,pc as st,qa as X,qb as oe,r as Re,tb as B,ua as Oe,vc as $,wc as z,xa as ne,xb as rt,xc as _,y as pt,ya as k,za as T,zc as E}from"./chunk-VO6IE2C5.js";var ai=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=Tt({type:a})}static{this.\u0275inj=kt({imports:[de,de]})}}return a})();function Ci(a){let i=a.cloneNode(!0),t=i.querySelectorAll("[id]"),e=a.nodeName.toLowerCase();i.removeAttribute("id");for(let n=0;n<t.length;n++)t[n].removeAttribute("id");return e==="canvas"?si(a,i):(e==="input"||e==="select"||e==="textarea")&&ri(a,i),oi("canvas",a,i,si),oi("input, textarea, select",a,i,ri),i}function oi(a,i,t,e){let n=i.querySelectorAll(a);if(n.length){let o=t.querySelectorAll(a);for(let r=0;r<n.length;r++)e(n[r],o[r])}}var Ni=0;function ri(a,i){i.type!=="file"&&(i.value=a.value),i.type==="radio"&&i.name&&(i.name=`mat-clone-${i.name}-${Ni++}`)}function si(a,i){let t=i.getContext("2d");if(t)try{t.drawImage(a,0,0)}catch{}}function ve(a){let i=a.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function pe(a,i,t){let{top:e,bottom:n,left:o,right:r}=a;return t>=e&&t<=n&&i>=o&&i<=r}function wt(a,i,t){a.top+=i,a.bottom=a.top+a.height,a.left+=t,a.right=a.left+a.width}function ci(a,i,t,e){let{top:n,right:o,bottom:r,left:s,width:c,height:d}=a,u=c*i,y=d*i;return e>n-y&&e<r+y&&t>s-u&&t<o+u}var $t=class{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ve(t)})})}handleScroll(i){let t=vt(i),e=this.positions.get(t);if(!e)return null;let n=e.scrollPosition,o,r;if(t===this._document){let d=this.getViewportScrollPosition();o=d.top,r=d.left}else o=t.scrollTop,r=t.scrollLeft;let s=n.top-o,c=n.left-r;return this.positions.forEach((d,u)=>{d.clientRect&&t!==u&&t.contains(u)&&wt(d.clientRect,s,c)}),n.top=o,n.left=r,{top:s,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function yi(a,i){let t=a.rootNodes;if(t.length===1&&t[0].nodeType===i.ELEMENT_NODE)return t[0];let e=i.createElement("div");return t.forEach(n=>e.appendChild(n)),e}function Ce(a,i,t){for(let e in i)if(i.hasOwnProperty(e)){let n=i[e];n?a.setProperty(e,n,t?.has(e)?"important":""):a.removeProperty(e)}return a}function mt(a,i){let t=i?"":"none";Ce(a.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function di(a,i,t){Ce(a.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},t)}function zt(a,i){return i&&i!="none"?a+" "+i:a}function li(a,i){a.style.width=`${i.width}px`,a.style.height=`${i.height}px`,a.style.transform=Gt(i.left,i.top)}function Gt(a,i){return`translate3d(${Math.round(a)}px, ${Math.round(i)}px, 0)`}function hi(a){let i=a.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(a)*i}function Vi(a){let i=getComputedStyle(a),t=me(i,"transition-property"),e=t.find(s=>s==="transform"||s==="all");if(!e)return 0;let n=t.indexOf(e),o=me(i,"transition-duration"),r=me(i,"transition-delay");return hi(o[n])+hi(r[n])}function me(a,i){return a.getPropertyValue(i).split(",").map(e=>e.trim())}var ji=new Set(["position"]),_e=class{get element(){return this._preview}constructor(i,t,e,n,o,r,s,c,d){this._document=i,this._rootElement=t,this._direction=e,this._initialDomRect=n,this._previewTemplate=o,this._previewClass=r,this._pickupPositionOnPage=s,this._initialTransform=c,this._zIndex=d}attach(i){this._preview=this._createPreview(),i.appendChild(this._preview),mi(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(i){this._preview.style.transform=i}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(i){this._preview.classList.add(i)}getTransitionDuration(){return Vi(this._preview)}addEventListener(i,t){this._preview.addEventListener(i,t)}removeEventListener(i,t){this._preview.removeEventListener(i,t)}_createPreview(){let i=this._previewTemplate,t=this._previewClass,e=i?i.template:null,n;if(e&&i){let o=i.matchSize?this._initialDomRect:null,r=i.viewContainer.createEmbeddedView(e,i.context);r.detectChanges(),n=yi(r,this._document),this._previewEmbeddedView=r,i.matchSize?li(n,o):n.style.transform=Gt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Ci(this._rootElement),li(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Ce(n.style,{"pointer-events":"none",margin:mi(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},ji),mt(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>n.classList.add(o)):n.classList.add(t)),n}};function mi(a){return"showPopover"in a}var pi=ft({passive:!0}),Vt=ft({passive:!1}),_i=ft({passive:!1,capture:!0}),Hi=800,ui=new Set(["position"]),ue=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(i){i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(t=>mt(t,i)))}constructor(i,t,e,n,o,r){this._config=t,this._document=e,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=B(!1),this._moveEvents=new C,this._pointerMoveSubscription=ot.EMPTY,this._pointerUpSubscription=ot.EMPTY,this._scrollSubscription=ot.EMPTY,this._resizeSubscription=ot.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new C,this.started=new C,this.released=new C,this.ended=new C,this.entered=new C,this.exited=new C,this.dropped=new C,this.moved=this._moveEvents,this._pointerDown=s=>{if(this.beforeStarted.next(),this._handles.length){let c=this._getTargetHandle(s);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,s)}else this.disabled||this._initializeDragSequence(this._rootElement,s)},this._pointerMove=s=>{let c=this._getPointerPositionOnPage(s);if(!this._hasStartedDragging()){let u=Math.abs(c.x-this._pickupPositionOnPage.x),y=Math.abs(c.y-this._pickupPositionOnPage.y);if(u+y>=this._config.dragStartThreshold){let Q=Date.now()>=this._dragStartTime+this._getDragStartDelay(s),q=this._dropContainer;if(!Q){this._endDragSequence(s);return}(!q||!q.isDragging()&&!q.isReceiving())&&(s.cancelable&&s.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(s)))}return}s.cancelable&&s.preventDefault();let d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{let u=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,y=this._activeTransform;y.x=d.x-u.x+this._passiveTransform.x,y.y=d.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(y.x,y.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:s,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=s=>{this._endDragSequence(s)},this._nativeDragStart=s=>{if(this._handles.length){let c=this._getTargetHandle(s);c&&!this._disabledHandles.has(c)&&!this.disabled&&s.preventDefault()}else this.disabled||s.preventDefault()},this.withRootElement(i).withParent(t.parentDragRef||null),this._parentPositions=new $t(e),r.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(e=>W(e)),this._handles.forEach(e=>mt(e,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(e=>{this._handles.indexOf(e)>-1&&t.add(e)}),this._disabledHandles=t,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){let t=W(i);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,Vt),t.addEventListener("touchstart",this._pointerDown,pi),t.addEventListener("dragstart",this._nativeDragStart,Vt)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?W(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),mt(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),mt(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){let i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){let i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",gi,_i)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){xt(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),e=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{t.addEventListener("selectstart",gi,_i)}),e){let n=this._rootElement,o=n.parentNode,r=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(s,n),this._initialTransform=n.style.transform||"",this._preview=new _e(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(o,t)),di(n,!1,ui),this._document.body.appendChild(o.replaceChild(r,n)),this.started.next({source:this,event:i}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(i,t){this._parentDragRef&&t.stopPropagation();let e=this.isDragging(),n=xt(t),o=!n&&t.button!==0,r=this._rootElement,s=vt(t),c=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+Hi>Date.now(),d=n?qe(t):Qe(t);if(s&&s.draggable&&t.type==="mousedown"&&t.preventDefault(),e||o||c||d)return;if(this._handles.length){let F=r.style;this._rootElementTapHighlight=F.webkitTapHighlightColor||"",F.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(F=>this._updateOnScroll(F)),this._boundaryElement&&(this._boundaryRect=ve(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,i,t);let y=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:y.x,y:y.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(i){di(this._rootElement,!0,ui),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,e=t.getItemIndex(this),n=this._getPointerPositionOnPage(i),o=this._getDragDistance(n),r=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:o,dropPoint:n,event:i}),this.dropped.next({item:this,currentIndex:e,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:o,dropPoint:n,event:i}),t.drop(this,e,this._initialIndex,this._initialContainer,r,o,n,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:t},{x:e,y:n}){let o=this._initialContainer._getSiblingContainerFromPosition(this,i,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,i,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(e,n),this._dropContainer._sortItem(this,i,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,t):this._applyPreviewTransform(i-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let i=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{let n=r=>{(!r||this._preview&&vt(r)===this._preview.element&&r.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",n),e(),clearTimeout(o))},o=setTimeout(n,t*1.5);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let i=this._placeholderTemplate,t=i?i.template:null,e;return t?(this._placeholderRef=i.viewContainer.createEmbeddedView(t,i.context),this._placeholderRef.detectChanges(),e=yi(this._placeholderRef,this._document)):e=Ci(this._rootElement),e.style.pointerEvents="none",e.classList.add("cdk-drag-placeholder"),e}_getPointerPositionInElement(i,t,e){let n=t===this._rootElement?null:t,o=n?n.getBoundingClientRect():i,r=xt(e)?e.targetTouches[0]:e,s=this._getViewportScrollPosition(),c=r.pageX-o.left-s.left,d=r.pageY-o.top-s.top;return{x:o.left-i.left+c,y:o.top-i.top+d}}_getPointerPositionOnPage(i){let t=this._getViewportScrollPosition(),e=xt(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,n=e.pageX-t.left,o=e.pageY-t.top;if(this._ownerSVGElement){let r=this._ownerSVGElement.getScreenCTM();if(r){let s=this._ownerSVGElement.createSVGPoint();return s.x=n,s.y=o,s.matrixTransform(r.inverse())}}return{x:n,y:o}}_getConstrainedPointerPosition(i){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:e,y:n}=this.constrainPosition?this.constrainPosition(i,this,this._initialDomRect,this._pickupPositionInElement):i;if(this.lockAxis==="x"||t==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(e=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:r}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,s=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),u=s.top+r,y=s.bottom-(d-r),F=s.left+o,Q=s.right-(c-o);e=bi(e,F,Q),n=bi(n,u,y)}return{x:e,y:n}}_updatePointerDirectionDelta(i){let{x:t,y:e}=i,n=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-o.x),s=Math.abs(e-o.y);return r>this._config.pointerDirectionChangeThreshold&&(n.x=t>o.x?1:-1,o.x=t),s>this._config.pointerDirectionChangeThreshold&&(n.y=e>o.y?1:-1,o.y=e),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,mt(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,Vt),i.removeEventListener("touchstart",this._pointerDown,pi),i.removeEventListener("dragstart",this._nativeDragStart,Vt)}_applyRootElementTransform(i,t){let e=1/this.scale,n=Gt(i*e,t*e),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=zt(n,this._initialTransform)}_applyPreviewTransform(i,t){let e=this._previewTemplate?.template?void 0:this._initialTransform,n=Gt(i,t);this._preview.setTransform(zt(n,e))}_getDragDistance(i){let t=this._pickupPositionOnPage;return t?{x:i.x-t.x,y:i.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:t}=this._passiveTransform;if(i===0&&t===0||this.isDragging()||!this._boundaryElement)return;let e=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||e.width===0&&e.height===0)return;let o=n.left-e.left,r=e.right-n.right,s=n.top-e.top,c=e.bottom-n.bottom;n.width>e.width?(o>0&&(i+=o),r>0&&(i-=r)):i=0,n.height>e.height?(s>0&&(t+=s),c>0&&(t-=c)):t=0,(i!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:i})}_getDragStartDelay(i){let t=this.dragStartDelay;return typeof t=="number"?t:xt(i)?t.touch:t?t.mouse:0}_updateOnScroll(i){let t=this._parentPositions.handleScroll(i);if(t){let e=vt(i);this._boundaryRect&&e!==this._boundaryElement&&e.contains(this._boundaryElement)&&wt(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Rt(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,t){let e=this._previewContainer||"global";if(e==="parent")return i;if(e==="global"){let n=this._document;return t||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return W(e)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(i){return this._handles.find(t=>i.target&&(i.target===t||t.contains(i.target)))}};function bi(a,i,t){return Math.max(i,Math.min(t,a))}function xt(a){return a.type[0]==="t"}function gi(a){a.preventDefault()}function nt(a,i,t){let e=Ut(i,a.length-1),n=Ut(t,a.length-1);if(e===n)return;let o=a[e],r=n<e?-1:1;for(let s=e;s!==n;s+=r)a[s]=a[s+r];a[n]=o}function xi(a,i,t,e){let n=Ut(t,a.length-1),o=Ut(e,i.length);a.length&&i.splice(o,0,a.splice(n,1)[0])}function Ut(a,i){return Math.max(0,Math.min(i,a))}var Wt=class{constructor(i){this._dragDropRegistry=i,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(i){this.withItems(i)}sort(i,t,e,n){let o=this._itemPositions,r=this._getItemIndexFromPointerPosition(i,t,e,n);if(r===-1&&o.length>0)return null;let s=this.orientation==="horizontal",c=o.findIndex(O=>O.drag===i),d=o[r],u=o[c].clientRect,y=d.clientRect,F=c>r?1:-1,Q=this._getItemOffsetPx(u,y,F),q=this._getSiblingOffsetPx(c,o,F),at=o.slice();return nt(o,c,r),o.forEach((O,Bi)=>{if(at[Bi]===O)return;let Se=O.drag===i,te=Se?Q:q,Pe=Se?i.getPlaceholderElement():O.drag.getRootElement();O.offset+=te;let Ee=Math.round(O.offset*(1/O.drag.scale));s?(Pe.style.transform=zt(`translate3d(${Ee}px, 0, 0)`,O.initialTransform),wt(O.clientRect,0,te)):(Pe.style.transform=zt(`translate3d(0, ${Ee}px, 0)`,O.initialTransform),wt(O.clientRect,te,0))}),this._previousSwap.overlaps=pe(y,t,e),this._previousSwap.drag=d.drag,this._previousSwap.delta=s?n.x:n.y,{previousIndex:c,currentIndex:r}}enter(i,t,e,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(i,t,e):n,r=this._activeDraggables,s=r.indexOf(i),c=i.getPlaceholderElement(),d=r[o];if(d===i&&(d=r[o+1]),!d&&(o==null||o===-1||o<r.length-1)&&this._shouldEnterAsFirstChild(t,e)&&(d=r[0]),s>-1&&r.splice(s,1),d&&!this._dragDropRegistry.isDragging(d)){let u=d.getRootElement();u.parentElement.insertBefore(c,u),r.splice(o,0,i)}else this._element.appendChild(c),r.push(i);c.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables?.forEach(i=>{let t=i.getRootElement();if(t){let e=this._itemPositions.find(n=>n.drag===i)?.initialTransform;t.style.transform=e||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(e=>e.drag===i)}updateOnScroll(i,t){this._itemPositions.forEach(({clientRect:e})=>{wt(e,i,t)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(i){this._element=i}_cacheItemPositions(){let i=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let e=t.getVisibleElement();return{drag:t,offset:0,initialTransform:e.style.transform||"",clientRect:ve(e)}}).sort((t,e)=>i?t.clientRect.left-e.clientRect.left:t.clientRect.top-e.clientRect.top)}_getItemOffsetPx(i,t,e){let n=this.orientation==="horizontal",o=n?t.left-i.left:t.top-i.top;return e===-1&&(o+=n?t.width-i.width:t.height-i.height),o}_getSiblingOffsetPx(i,t,e){let n=this.orientation==="horizontal",o=t[i].clientRect,r=t[i+e*-1],s=o[n?"width":"height"]*e;if(r){let c=n?"left":"top",d=n?"right":"bottom";e===-1?s-=r.clientRect[c]-o[d]:s+=o[c]-r.clientRect[d]}return s}_shouldEnterAsFirstChild(i,t){if(!this._activeDraggables.length)return!1;let e=this._itemPositions,n=this.orientation==="horizontal";if(e[0].drag!==this._activeDraggables[0]){let r=e[e.length-1].clientRect;return n?i>=r.right:t>=r.bottom}else{let r=e[0].clientRect;return n?i<=r.left:t<=r.top}}_getItemIndexFromPointerPosition(i,t,e,n){let o=this.orientation==="horizontal",r=this._itemPositions.findIndex(({drag:s,clientRect:c})=>{if(s===i)return!1;if(n){let d=o?n.x:n.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return o?t>=Math.floor(c.left)&&t<Math.floor(c.right):e>=Math.floor(c.top)&&e<Math.floor(c.bottom)});return r===-1||!this._sortPredicate(r,i)?-1:r}},be=class{constructor(i,t){this._document=i,this._dragDropRegistry=t,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(i){let t=this._element.childNodes;this._relatedNodes=[];for(let e=0;e<t.length;e++){let n=t[e];this._relatedNodes.push([n,n.nextSibling])}this.withItems(i)}sort(i,t,e,n){let o=this._getItemIndexFromPointerPosition(i,t,e),r=this._previousSwap;if(o===-1||this._activeItems[o]===i)return null;let s=this._activeItems[o];if(r.drag===s&&r.overlaps&&r.deltaX===n.x&&r.deltaY===n.y)return null;let c=this.getItemIndex(i),d=i.getPlaceholderElement(),u=s.getRootElement();o>c?u.after(d):u.before(d),nt(this._activeItems,c,o);let y=this._getRootNode().elementFromPoint(t,e);return r.deltaX=n.x,r.deltaY=n.y,r.drag=s,r.overlaps=u===y||u.contains(y),{previousIndex:c,currentIndex:o}}enter(i,t,e,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(i,t,e):n;o===-1&&(o=this._getClosestItemIndexToPointer(i,t,e));let r=this._activeItems[o],s=this._activeItems.indexOf(i);s>-1&&this._activeItems.splice(s,1),r&&!this._dragDropRegistry.isDragging(r)?(this._activeItems.splice(o,0,i),r.getRootElement().before(i.getPlaceholderElement())):(this._activeItems.push(i),this._element.appendChild(i.getPlaceholderElement()))}withItems(i){this._activeItems=i.slice()}withSortPredicate(i){this._sortPredicate=i}reset(){let i=this._element,t=this._previousSwap;for(let e=this._relatedNodes.length-1;e>-1;e--){let[n,o]=this._relatedNodes[e];n.parentNode===i&&n.nextSibling!==o&&(o===null?i.appendChild(n):o.parentNode===i&&i.insertBefore(n,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(i){return this._activeItems.indexOf(i)}updateOnScroll(){this._activeItems.forEach(i=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(i){i!==this._element&&(this._element=i,this._rootNode=void 0)}_getItemIndexFromPointerPosition(i,t,e){let n=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(e)),o=n?this._activeItems.findIndex(r=>{let s=r.getRootElement();return n===s||s.contains(n)}):-1;return o===-1||!this._sortPredicate(o,i)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=Rt(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(i,t,e){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,o=-1;for(let r=0;r<this._activeItems.length;r++){let s=this._activeItems[r];if(s!==i){let{x:c,y:d}=s.getRootElement().getBoundingClientRect(),u=Math.hypot(t-c,e-d);u<n&&(n=u,o=r)}}return o}},fi=.05,wi=.05,N=function(a){return a[a.NONE=0]="NONE",a[a.UP=1]="UP",a[a.DOWN=2]="DOWN",a}(N||{}),R=function(a){return a[a.NONE=0]="NONE",a[a.LEFT=1]="LEFT",a[a.RIGHT=2]="RIGHT",a}(R||{}),ge=class{constructor(i,t,e,n,o){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new C,this.entered=new C,this.exited=new C,this.dropped=new C,this.sorted=new C,this.receivingStarted=new C,this.receivingStopped=new C,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=ot.EMPTY,this._verticalScrollDirection=N.NONE,this._horizontalScrollDirection=R.NONE,this._stopScrollTimers=new C,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),Me(0,Re).pipe(_t(this._stopScrollTimers)).subscribe(()=>{let s=this._scrollNode,c=this.autoScrollStep;this._verticalScrollDirection===N.UP?s.scrollBy(0,-c):this._verticalScrollDirection===N.DOWN&&s.scrollBy(0,c),this._horizontalScrollDirection===R.LEFT?s.scrollBy(-c,0):this._horizontalScrollDirection===R.RIGHT&&s.scrollBy(c,0)})};let r=this.element=W(i);this._document=e,this.withOrientation("vertical").withElementContainer(r),t.registerDropContainer(this),this._parentPositions=new $t(e)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,t,e,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(i)),this._sortStrategy.enter(i,t,e,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,t,e,n,o,r,s,c={}){this._reset(),this.dropped.next({item:i,currentIndex:t,previousIndex:e,container:this,previousContainer:n,isPointerOverContainer:o,distance:r,dropPoint:s,event:c})}withItems(i){let t=this._draggables;return this._draggables=i,i.forEach(e=>e._withDropContainer(this)),this.isDragging()&&(t.filter(n=>n.isDragging()).every(n=>i.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._direction=i,this._sortStrategy instanceof Wt&&(this._sortStrategy.direction=i),this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){if(i==="mixed")this._sortStrategy=new be(this._document,this._dragDropRegistry);else{let t=new Wt(this._dragDropRegistry);t.direction=this._direction,t.orientation=i,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,e)=>this.sortPredicate(t,e,this)),this}withScrollableParents(i){let t=this._container;return this._scrollableElements=i.indexOf(t)===-1?[t,...i]:i.slice(),this}withElementContainer(i){if(i===this._container)return this;let t=W(this.element),e=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(i);return e>-1&&this._scrollableElements.splice(e,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(i),this._cachedShadowRoot=null,this._scrollableElements.unshift(i),this._container=i,this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,t,e,n){if(this.sortingDisabled||!this._domRect||!ci(this._domRect,fi,t,e))return;let o=this._sortStrategy.sort(i,t,e,n);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,t){if(this.autoScrollDisabled)return;let e,n=N.NONE,o=R.NONE;if(this._parentPositions.positions.forEach((r,s)=>{s===this._document||!r.clientRect||e||ci(r.clientRect,fi,i,t)&&([n,o]=$i(s,r.clientRect,this._direction,i,t),(n||o)&&(e=s))}),!n&&!o){let{width:r,height:s}=this._viewportRuler.getViewportSize(),c={width:r,height:s,top:0,right:r,bottom:s,left:0};n=Ii(c,t),o=Di(c,i),e=window}e&&(n!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||e!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=o,this._scrollNode=e,(n||o)&&e?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let i=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let i=this._container.style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(i,t){return this._domRect!=null&&pe(this._domRect,i,t)}_getSiblingContainerFromPosition(i,t,e){return this._siblings.find(n=>n._canReceive(i,t,e))}_canReceive(i,t,e){if(!this._domRect||!pe(this._domRect,t,e)||!this.enterPredicate(i,this))return!1;let n=this._getShadowRoot().elementFromPoint(t,e);return n?n===this._container||this._container.contains(n):!1}_startReceiving(i,t){let e=this._activeSiblings;!e.has(i)&&t.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(e.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:t}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(i);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let i=Rt(this._container);this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let i=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,i))}};function Ii(a,i){let{top:t,bottom:e,height:n}=a,o=n*wi;return i>=t-o&&i<=t+o?N.UP:i>=e-o&&i<=e+o?N.DOWN:N.NONE}function Di(a,i){let{left:t,right:e,width:n}=a,o=n*wi;return i>=t-o&&i<=t+o?R.LEFT:i>=e-o&&i<=e+o?R.RIGHT:R.NONE}function $i(a,i,t,e,n){let o=Ii(i,n),r=Di(i,e),s=N.NONE,c=R.NONE;if(o){let d=a.scrollTop;o===N.UP?d>0&&(s=N.UP):a.scrollHeight-d>a.clientHeight&&(s=N.DOWN)}if(r){let d=a.scrollLeft;t==="rtl"?r===R.RIGHT?d<0&&(c=R.RIGHT):a.scrollWidth+d>a.clientWidth&&(c=R.LEFT):r===R.LEFT?d>0&&(c=R.LEFT):a.scrollWidth-d>a.clientWidth&&(c=R.RIGHT)}return[s,c]}var jt=ft({passive:!1,capture:!0}),Ht=new Set,zi=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=H({type:a,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[z],decls:0,vars:0,template:function(e,n){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}}return a})(),Gi=(()=>{class a{constructor(t,e){this._ngZone=t,this._appRef=D(je),this._environmentInjector=D(Oe),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=B([]),this._globalListeners=new Map,this._draggingPredicate=n=>n.isDragging(),this.pointerMove=new C,this.pointerUp=new C,this.scroll=new C,this._preventDefaultWhileDragging=n=>{this._activeDragInstances().length>0&&n.preventDefault()},this._persistentTouchmoveListener=n=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,jt)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,jt)}startDragging(t,e){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._loadResets(),this._activeDragInstances.update(n=>[...n,t]),this._activeDragInstances().length===1)){let n=e.type.startsWith("touch");this._globalListeners.set(n?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:jt}),n||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:jt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,r)=>{this._document.addEventListener(r,o.handler,o.options)})})}}stopDragging(t){this._activeDragInstances.update(e=>{let n=e.indexOf(t);return n>-1?(e.splice(n,1),[...e]):e}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let e=[this.scroll];return t&&t!==this._document&&e.push(new ee(n=>this._ngZone.runOutsideAngular(()=>{let r=s=>{this._activeDragInstances().length&&n.next(s)};return t.addEventListener("scroll",r,!0),()=>{t.removeEventListener("scroll",r,!0)}}))),Dt(...e)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}_loadResets(){if(!Ht.has(this._appRef)){Ht.add(this._appRef);let t=$e(zi,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{Ht.delete(this._appRef),Ht.size===0&&t.destroy()})}}static{this.\u0275fac=function(e){return new(e||a)(Y(bt),Y(Et))}}static{this.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Ui={dragStartThreshold:5,pointerDirectionChangeThreshold:5},ye=(()=>{class a{constructor(t,e,n,o){this._document=t,this._ngZone=e,this._viewportRuler=n,this._dragDropRegistry=o}createDrag(t,e=Ui){return new ue(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new ge(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(e){return new(e||a)(Y(Et),Y(bt),Y(Ue),Y(Gi))}}static{this.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Qt=new Z("CDK_DRAG_PARENT");var ki=new Z("CdkDragHandle"),qt=(()=>{class a{get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}constructor(t,e){this.element=t,this._parentDrag=e,this._stateChanges=new C,this._disabled=!1,e?._addHandle(this)}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static{this.\u0275fac=function(e){return new(e||a)(v(gt),v(Qt,12))}}static{this.\u0275dir=X({type:a,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",it]},standalone:!0,features:[$([{provide:ki,useExisting:a}]),rt]})}}return a})(),Ti=new Z("CDK_DRAG_CONFIG"),Wi="cdk-drag",Si=new Z("CdkDropList"),Kt=(()=>{class a{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}constructor(t,e,n,o,r,s,c,d,u,y,F){this.element=t,this.dropContainer=e,this._ngZone=o,this._viewContainerRef=r,this._dir=c,this._changeDetectorRef=u,this._selfHandle=y,this._parentDrag=F,this._destroyed=new C,this._handles=new K([]),this.scale=1,this.started=new V,this.released=new V,this.ended=new V,this.entered=new V,this.exited=new V,this.dropped=new V,this.moved=new ee(Q=>{let q=this._dragRef.moved.pipe(pt(at=>({source:this,pointerPosition:at.pointerPosition,event:at.event,delta:at.delta,distance:at.distance}))).subscribe(Q);return()=>{q.unsubscribe()}}),this._injector=D(Ae),this._dragRef=d.createDrag(t,{dragStartThreshold:s&&s.dragStartThreshold!=null?s.dragStartThreshold:5,pointerDirectionChangeThreshold:s&&s.pointerDirectionChangeThreshold!=null?s.pointerDirectionChangeThreshold:5,zIndex:s?.zIndex}),this._dragRef.data=this,a._dragInstances.push(this),s&&this._assignDefaults(s),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(_t(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Ve(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let t=a._dragInstances.indexOf(this);t>-1&&a._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let e=this._handles.getValue();e.push(t),this._handles.next(e)}_removeHandle(t){let e=this._handles.getValue(),n=e.indexOf(t);n>-1&&(e.splice(n,1),this._handles.next(e))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,e=t;this.rootElementSelector&&(e=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(e||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):W(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let e=this._dir,n=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof n=="object"&&n?n:se(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(r).withPreviewContainer(this.previewContainer||"global"),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(w(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let e=this.element.nativeElement.parentElement;for(;e;){if(e.classList.contains(Wi)){t.withParent(a._dragInstances.find(n=>n.element.nativeElement===e)?._dragRef||null);break}e=e.parentElement}})}_handleEvents(t){t.started.subscribe(e=>{this.started.emit({source:this,event:e.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(e=>{this.released.emit({source:this,event:e.event})}),t.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance,dropPoint:e.dropPoint,event:e.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),t.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),t.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance,dropPoint:e.dropPoint,event:e.event})})}_assignDefaults(t){let{lockAxis:e,dragStartDelay:n,constrainPosition:o,previewClass:r,boundaryElement:s,draggingDisabled:c,rootElementSelector:d,previewContainer:u}=t;this.disabled=c??!1,this.dragStartDelay=n||0,e&&(this.lockAxis=e),o&&(this.constrainPosition=o),r&&(this.previewClass=r),s&&(this.boundaryElement=s),d&&(this.rootElementSelector=d),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(Fe(t=>{let e=t.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&e.push(this.element),this._dragRef.withHandles(e)}),Le(t=>Dt(...t.map(e=>e._stateChanges.pipe(ie(e))))),_t(this._destroyed)).subscribe(t=>{let e=this._dragRef,n=t.element.nativeElement;t.disabled?e.disableHandle(n):e.enableHandle(n)})}static{this.\u0275fac=function(e){return new(e||a)(v(gt),v(Si,12),v(Et),v(bt),v(oe),v(Ti,8),v(ce,8),v(ye),v(Pt),v(ki,10),v(Qt,12))}}static{this.\u0275dir=X({type:a,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,n){e&2&&j("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",it],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",He]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[$([{provide:Qt,useExisting:a}]),rt,ne]})}}return a})(),fe=new Z("CdkDropListGroup"),Zt=(()=>{class a{constructor(){this._items=new Set,this.disabled=!1}ngOnDestroy(){this._items.clear()}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275dir=X({type:a,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:[2,"cdkDropListGroupDisabled","disabled",it]},exportAs:["cdkDropListGroup"],standalone:!0,features:[$([{provide:fe,useExisting:a}]),rt]})}}return a})(),Qi=0,Yt=(()=>{class a{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}constructor(t,e,n,o,r,s,c){this.element=t,this._changeDetectorRef=n,this._scrollDispatcher=o,this._dir=r,this._group=s,this._destroyed=new C,this.connectedTo=[],this.id=`cdk-drop-list-${Qi++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new V,this.entered=new V,this.exited=new V,this.sorted=new V,this._unsortedItems=new Set,this._dropListRef=e.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(d,u)=>this.enterPredicate(d.data,u.data),this._dropListRef.sortPredicate=(d,u,y)=>this.sortPredicate(d,u.data,y.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),a._dropLists.push(this),s&&s._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,e)=>t._dragRef.getVisibleElement().compareDocumentPosition(e._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=a._dropLists.indexOf(this);t>-1&&a._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(ie(this._dir.value),_t(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{let e=ze(this.connectedTo).map(n=>{if(typeof n=="string"){let o=a._dropLists.find(r=>r.id===n);return o}return n});if(this._group&&this._group._items.forEach(n=>{e.indexOf(n)===-1&&e.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(n)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=se(this.autoScrollStep,2),t.connectedTo(e.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),t.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),t.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance,dropPoint:e.dropPoint,event:e.event}),this._changeDetectorRef.markForCheck()}),Dt(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:e,draggingDisabled:n,sortingDisabled:o,listAutoScrollDisabled:r,listOrientation:s}=t;this.disabled=n??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=r??!1,this.orientation=s||"vertical",e&&(this.lockAxis=e)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}static{this.\u0275fac=function(e){return new(e||a)(v(gt),v(ye),v(Pt),v(Ge),v(ce,8),v(fe,12),v(Ti,8))}}static{this.\u0275dir=X({type:a,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,n){e&2&&(re("id",n.id),j("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",it],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",it],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",it],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[$([{provide:fe,useValue:void 0},{provide:Si,useExisting:a}]),rt]})}}return a})();var qi=new Z("CdkDragPlaceholder"),Pi=(()=>{class a{constructor(t){this.templateRef=t,this._drag=D(Qt,{optional:!0}),this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static{this.\u0275fac=function(e){return new(e||a)(v(ae))}}static{this.\u0275dir=X({type:a,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},standalone:!0,features:[$([{provide:qi,useExisting:a}])]})}}return a})();var Xt=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=Tt({type:a})}static{this.\u0275inj=kt({providers:[ye],imports:[We]})}}return a})();var It=(()=>{class a{constructor(){this._navbarService=D(Nt),this._networkService=D(ei),this._menu$=new K(void 0),this.template=B({}),this.loaded$=this._menu$.asObservable().pipe(pt(t=>!!t)),this.store$=this._menu$.asObservable().pipe(pt(t=>t?.store)),this.content$=new K([]),this.group$=new K([]),this.deletedItems=[],this.deletedCategories=[],this.deletedSubcategories=[],this.menuName$=new K("")}getMenuById(t){this._networkService.post(he.MENU.menuById,{menuId:t}).pipe(w(1)).subscribe({next:e=>{if(!e)this._navbarService.navigateTo(Ct.LAYOUT.children.HOME.route);else if(e.data){this.template.set(e.data.template||{}),this._menu$.next(e.data),this.group$.next(e.data.categories.sort((r,s)=>r.order-s.order)||[]);let n=e.data;this.menuName$.next(e.data.menu?.name||"");let o=n.sub_categories.sort((r,s)=>r.order-s.order).map(r=>(r.items=n.items.filter(s=>s.subcategoryId===r._id).sort((s,c)=>s.order-c.order).map((s,c)=>A(x({},s),{order:c+1}))||[],r));this.content$.next(o||[]),this.deletedItems=[],this.deletedSubcategories=[]}},error:()=>{this._navbarService.navigateTo(Ct.LAYOUT.children.HOME.route)}})}saveMenu(t,e){t.store&&(t.store.menuId=e),this._networkService.patch(he.MENU.bulkSave,ni(A(x({},t),{deletedItems:this.deletedItems,deletedCategories:this.deletedCategories,deletedSubcategories:this.deletedSubcategories}))).pipe(w(1)).subscribe(n=>{n&&this.getMenuById(e)})}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=ut({token:a,factory:a.\u0275fac})}}return a})();var xe=(a,i)=>i._id,we=()=>({icon:"icon_menu",color:"var(--mdc-text-button-label-text-color, var(--mat-app-primary))"}),Ie=()=>({icon:"icon_eye_off",color:"#ba1a1a"}),Ki=()=>({text:"Add Item"}),Ri=()=>({icon:"icon_plus_circle"}),Jt=(a,i)=>({label:a,prefixIcon:i,matType:"mat-icon-button"}),Mi=()=>({text:"Edit Category"}),De=()=>({icon:"icon_edit"}),Li=()=>({text:"Delete Category"}),ke=()=>({icon:"icon_delete"}),Te=(a,i)=>({label:a,prefixIcon:i,color:"warn",matType:"mat-icon-button"}),Fi=()=>({addClass:"text-break border border-1 py-0 px-1"}),Zi=()=>({text:"Edit Item"}),Yi=()=>({text:"Delete Item"}),Xi=()=>({icon:"icon_error_triangle"}),Ji=()=>({text:"Add First Category"}),tn=(a,i)=>({label:a,prefixIcon:i,matType:"mat-flat-button"});function en(a,i){a&1&&P(0,"div",19)}function nn(a,i){a&1&&P(0,"ks-base-icon",11),a&2&&b("config",_(1,we))}function an(a,i){a&1&&P(0,"ks-base-icon",14),a&2&&b("config",_(1,Ie))}function on(a,i){if(a&1){let t=S();p(0,"ks-base-button",20),I("onClick",function(){k(t);let n=m().$implicit,o=m(5);return T(o.addEditItem(n))}),h()}a&2&&b("config",E(3,Jt,_(1,Ki),_(2,Ri)))}function rn(a,i){if(a&1){let t=S();p(0,"ks-base-button",20),I("onClick",function(){k(t);let n=m().$implicit,o=m(5);return T(o.addEditSubCategory(n))}),h()}a&2&&b("config",E(3,Jt,_(1,Mi),_(2,De)))}function sn(a,i){if(a&1){let t=S();p(0,"ks-base-button",20),I("onClick",function(){k(t);let n=m().$implicit,o=m(5);return T(o.deleteCategory(n))}),h()}a&2&&b("config",E(3,Te,_(1,Li),_(2,ke)))}function cn(a,i){a&1&&P(0,"ks-base-icon",11),a&2&&b("config",_(1,we))}function dn(a,i){a&1&&P(0,"ks-base-icon",14),a&2&&b("config",_(1,Ie))}function ln(a,i){if(a&1){let t=S();p(0,"ks-base-button",20),I("onClick",function(){k(t);let n=m().$implicit,o=m().$implicit,r=m(5);return T(r.addEditItem(o,n))}),h()}a&2&&b("config",E(3,Jt,_(1,Zi),_(2,De)))}function hn(a,i){if(a&1){let t=S();p(0,"ks-base-button",20),I("onClick",function(){k(t);let n=m().$implicit,o=m().$implicit,r=m(5);return T(r.deleteItem(o,n))}),h()}a&2&&b("config",E(3,Te,_(1,Yi),_(2,ke)))}function mn(a,i){if(a&1&&(p(0,"div",18)(1,"ks-base-card",11)(2,"div",21)(3,"div",10),f(4,cn,1,2,"ks-base-icon",11),h(),p(5,"div",12)(6,"div",13),M(7),h(),f(8,dn,1,2,"ks-base-icon",14),h(),p(9,"div",22),f(10,ln,1,6,"ks-base-button",11)(11,hn,1,6,"ks-base-button",11),h()()()()),a&2){let t=i.$implicit,e=m(6);l(),b("config",_(8,Fi)),l(2),j("move",e.currentScreen.update),l(),g(e.currentScreen.update?4:-1),l(3),et(t.label),l(),g(t.hide?8:-1),l(2),g(e.currentScreen.update?10:-1),l(),g(e.currentScreen.delete?11:-1)}}function pn(a,i){if(a&1){let t=S();p(0,"mat-expansion-panel",6,0),f(2,en,1,0,"div",7),p(3,"mat-expansion-panel-header")(4,"mat-panel-title",8)(5,"div",9)(6,"div",10),f(7,nn,1,2,"ks-base-icon",11),h(),p(8,"div",12)(9,"div",13),M(10),h(),f(11,an,1,2,"ks-base-icon",14),h()()()(),p(12,"div",15),I("cdkDropListDropped",function(n){let o=k(t).$implicit,r=m(5);return T(r.dropItem(n,o._id))}),p(13,"div",5)(14,"div",16)(15,"div",17),f(16,on,1,6,"ks-base-button",11)(17,rn,1,6,"ks-base-button",11)(18,sn,1,6,"ks-base-button",11),h()()(),p(19,"div",5)(20,"div",16),J(21,mn,12,9,"div",18,xe),h()()()()}if(a&2){let t=i.$implicit,e=m(5);l(6),j("move",e.currentScreen.update),l(),g(e.currentScreen.update?7:-1),l(3),et(t.label),l(),g(t.hide?11:-1),l(),b("cdkDropListData",t.items)("cdkDropListDisabled",!e.currentScreen.update),l(4),g(e.currentScreen.insert?16:-1),l(),g(e.currentScreen.update?17:-1),l(),g(e.currentScreen.delete?18:-1),l(3),tt(t.items)}}function _n(a,i){if(a&1&&(p(0,"mat-accordion",4),J(1,pn,23,10,"mat-expansion-panel",6,xe),h()),a&2){let t=m(3);l(),tt(t)}}function un(a,i){a&1&&P(0,"ks-base-icon",11),a&2&&b("config",_(1,we))}function bn(a,i){a&1&&P(0,"ks-base-icon",14),a&2&&b("config",_(1,Ie))}function gn(a,i){if(a&1){let t=S();p(0,"ks-base-button",20),I("onClick",function(){k(t);let n=m().$implicit,o=m(5);return T(o.addEditSubCategory(n))}),h()}a&2&&b("config",E(3,Jt,_(1,Mi),_(2,De)))}function fn(a,i){if(a&1){let t=S();p(0,"ks-base-button",20),I("onClick",function(){k(t);let n=m().$implicit,o=m(5);return T(o.deleteCategory(n))}),h()}a&2&&b("config",E(3,Te,_(1,Li),_(2,ke)))}function vn(a,i){if(a&1&&(p(0,"div",18)(1,"ks-base-card",11)(2,"div",21)(3,"div",10),f(4,un,1,2,"ks-base-icon",11),h(),p(5,"div",12)(6,"div",13),M(7),h(),f(8,bn,1,2,"ks-base-icon",14),h(),p(9,"div",22),f(10,gn,1,6,"ks-base-button",11)(11,fn,1,6,"ks-base-button",11),h()()()()),a&2){let t=i.$implicit,e=m(5);l(),b("config",_(8,Fi)),l(2),j("move",e.currentScreen.update),l(),g(e.currentScreen.update?4:-1),l(3),et(t.label),l(),g(t.hide?8:-1),l(2),g(e.currentScreen.update?10:-1),l(),g(e.currentScreen.delete?11:-1)}}function Cn(a,i){if(a&1&&(p(0,"div",5)(1,"div",16),J(2,vn,12,9,"div",18,xe),h()()),a&2){let t=m(3);l(2),tt(t)}}function yn(a,i){if(a&1){let t=S();p(0,"div",3),I("cdkDropListDropped",function(n){k(t);let o=m(3);return T(o.drop(n))}),f(1,_n,3,0,"mat-accordion",4)(2,Cn,4,0,"div",5),h()}if(a&2){let t=m(3);b("cdkDropListDisabled",!t.currentScreen.update),l(),g(t.template().menu_item?1:2)}}function xn(a,i){if(a&1){let t=S();p(0,"div",26)(1,"ks-base-button",20),I("onClick",function(){k(t);let n=m(4);return T(n.addEditSubCategory())}),h()()}a&2&&(l(),b("config",E(3,tn,_(1,Ji),_(2,Ri))))}function wn(a,i){if(a&1&&(p(0,"div",2)(1,"div",23),P(2,"ks-base-icon",24),M(3," No Categories Found "),h(),p(4,"p",25),M(5),h(),f(6,xn,2,6,"div",26),h()),a&2){let t=m(3);l(2),b("config",_(3,Xi)),l(3),st(" It looks like you haven\u2019t added any categories yet. ",t.currentScreen.insert?"Click the button below to get started by adding your first category!":""," "),l(),g(t.currentScreen.insert?6:-1)}}function In(a,i){if(a&1&&(f(0,yn,3,2,"div",1),G(1,"async"),f(2,wn,7,4,"div",2)),a&2){let t=m(),e=m();g(t.length?0:U(1,1,e.loaded$)?2:-1)}}function Dn(a,i){if(a&1&&f(0,In,3,3),a&2){let t=m();g(t.template().menu_subcategory?0:-1)}}var Oi=(()=>{class a{constructor(){this._destroyRef=D(St),this._dialog=D(dt),this._menuService=D(It),this.editMade=Be(),this.addCategory$=Ne.required(),this.loaded$=this._menuService.loaded$,this.template=this._menuService.template,this.categories$=this._menuService.content$,this.currentScreen=ht("menu_crud")}ngOnInit(){this.addCategory$().pipe(Ft(this._destroyRef)).subscribe(()=>{this.addEditSubCategory()})}drop(t){this.categories$.pipe(w(1)).subscribe(e=>{nt(e,t.previousIndex,t.currentIndex),e.forEach((n,o)=>{n.order=o+1})}),this.editMade.emit()}dropItem(t,e){if(t.previousContainer===t.container)nt(t.container.data,t.previousIndex,t.currentIndex),t.container.data.forEach((n,o)=>{n.order=o+1});else{xi(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex);let n=t.container.data[t.currentIndex];n&&(n.subcategoryId=e),t.previousContainer.data.forEach((o,r)=>{o.order=r+1}),t.container.data.forEach((o,r)=>{o.order=r+1})}this.editMade.emit()}addEditSubCategory(t){let e=this.template(),n={hideClearButton:!0,title:{text:t?"Edit Category":"Add Category"},form:{groups:[{id:1,name:{text:"Images"},order:0},{id:2,name:{text:"Details"},order:1}],value:t,fields:[{name:"label",label:{text:"Category Name"},required:!0,groupId:2,type:"text"},{name:"categoryId",label:{text:"Group"},required:e.menu_category,hide:!e.menu_category,groupId:2,type:"select",stream:this._menuService.group$,transformer:{nameKey:"label",valueKey:"_id"}},{name:"img",label:{text:"Icon"},type:"image",groupId:1,hide:!e.subcategory_img,maxSizeInMB:e.subcategory_img_max_size},{name:"bgImg",label:{text:"Image"},type:"image",groupId:1,hide:!e.subcategory_bgImg,maxSizeInMB:e.subcategory_bgImg_max_size},{name:"pageNb",label:{text:"Page Number"},type:"number",hide:!e.subcategory_pageNb,extraValidators:[le.min(1)],groupId:2},{name:"note",label:{text:"Note"},type:"textaria",hide:!e.subcategory_note,groupId:2},{name:"hide",label:{text:"Is Hidden"},groupId:2,type:"checkbox"}]}};this._dialog.openFormPopup(n,"900px").afterClosed().pipe(w(1)).subscribe(o=>{o&&(t?L.UpdateArrayBehaviorSubject(this.categories$,x(x({},t),o),"edit","_id"):L.UpdateArrayBehaviorSubject(this.categories$,A(x({},o),{_id:"newSubcategory"+new Date().getTime().toString(),items:[],order:new Date().getTime()}),"add","_id"),this.editMade.emit())})}addEditItem(t,e){let n=this.template(),o={hideClearButton:!0,title:{text:e?"Edit Item":"Add Item"},form:{value:e,groups:[{id:1,name:{text:"Images"},order:0},{id:2,name:{text:"Details"},order:1}],fields:[{name:"label",label:{text:"Item Name"},required:!0,type:"text",groupId:2},{name:"price",label:{text:"Price"},type:"number",groupId:2},{name:"description",label:{text:"Description"},type:"textaria",hide:!n.item_description,groupId:2},{name:"unit",label:{text:"Unit"},type:"text",hide:!n.item_unit,groupId:2},{name:"img",label:{text:"Icon"},type:"image",groupId:1,hide:!n.item_img,maxSizeInMB:n.item_img_max_size},{name:"bgImg",label:{text:"Image"},type:"image",groupId:1,hide:!n.item_bgImg,maxSizeInMB:n.item_bgImg_max_size},{name:"calories",label:{text:"Calories"},type:"number",extraValidators:[le.min(0)],hide:!n.item_calories,groupId:2},{name:"hide",label:{text:"Is Hidden"},type:"checkbox",groupId:2},{name:"is_Starred",label:{text:"Is Starred"},type:"checkbox",hide:!n.item_is_Starred,groupId:2},{name:"is_New",label:{text:"Is New"},type:"checkbox",hide:!n.item_is_New,groupId:2}]}};this._dialog.openFormPopup(o,"900px").afterClosed().pipe(w(1)).subscribe(r=>{r&&(e?L.UpdateArray(t.items,x(x({},e),r),"edit","_id"):L.UpdateArray(t.items,A(x({},r),{_id:"newItem"+new Date().getTime().toString(),order:new Date().getTime()}),"add","_id"),L.UpdateArrayBehaviorSubject(this.categories$,t,"edit","_id"),this.editMade.emit())})}deleteCategory(t){this._dialog.openConfirmPopup({title:{text:"Confirm Delete"},message:{text:"Are you sure you want to delete this category? This action will remove all items associated with it."}},"500px").afterClosed().pipe(w(1)).subscribe(e=>{e&&(L.UpdateArrayBehaviorSubject(this.categories$,t,"delete","_id"),this.editMade.emit(),t._id.startsWith("new")||this._menuService.deletedSubcategories.push(t._id),t.items.forEach(n=>{n._id.startsWith("new")||this._menuService.deletedItems.push(n._id)}))})}deleteItem(t,e){this._dialog.openConfirmPopup({title:{text:"Confirm Delete"},message:{text:"Are you sure you want to delete this item?"}},"500px").afterClosed().pipe(w(1)).subscribe(n=>{n&&(L.UpdateArray(t.items,e,"delete","_id"),L.UpdateArrayBehaviorSubject(this.categories$,t,"edit","_id"),this.editMade.emit(),e._id.startsWith("new")||this._menuService.deletedItems.push(e._id))})}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=H({type:a,selectors:[["ks-solutions-content"]],inputs:{addCategory$:[1,"addCategory$"]},outputs:{editMade:"editMade"},standalone:!0,features:[z],decls:2,vars:3,consts:[["expansionPanel",""],["cdkDropListGroup","","cdkDropList","","cdkScrollable","",1,"scrollable-container",3,"cdkDropListDisabled"],[1,"mx-auto","text-center","pt-4",2,"max-width","400px"],["cdkDropListGroup","","cdkDropList","","cdkScrollable","",1,"scrollable-container",3,"cdkDropListDropped","cdkDropListDisabled"],["multi",""],[1,"container-fluid"],["cdkDrag","",1,"border","border-1"],["class","border boorder-3 border-danger",4,"cdkDragPlaceholder"],[1,"h5","mb-0"],[2,"display","grid","grid-template-columns","auto 1fr"],["cdkDragHandle","",1,"p-2","text-primary","d-flex","align-items-center","h-100"],[3,"config"],[1,"d-flex","align-items-center","h-100"],[1,"text-break"],[1,"ms-2",3,"config"],["cdkDropList","",3,"cdkDropListDropped","cdkDropListData","cdkDropListDisabled"],[1,"row"],[1,"col-12","py-3","d-flex","gap-2","justify-content-end","flex-wrap"],["cdkDrag","",1,"col-12","mb-2","card-hover"],[1,"border","boorder-3","border-danger"],[3,"onClick","config"],[2,"display","grid","grid-template-columns","auto 1fr auto","min-height","40px"],[1,"p-2","text-primary","d-flex","align-items-center","h-100"],[1,"h4","d-flex","align-items-center","justify-content-center"],[1,"me-3",3,"config"],[1,"mb-4",2,"color","#6c757d"],[1,"text-center"]],template:function(e,n){if(e&1&&(f(0,Dn,1,1),G(1,"async")),e&2){let o;g((o=U(1,1,n.categories$))?0:-1,o)}},dependencies:[Bt,ct,Lt,Ot,ti,Ye,Xe,Je,lt,At,Xt,Mt,Yt,Zt,Kt,qt,Pi],styles:["[_nghost-%COMP%]{--row-border: 1px solid rgb(193, 193, 193)}[_nghost-%COMP%]     .mat-expansion-panel-body{padding:0 0 8px!important}[_nghost-%COMP%]     .mat-expansion-panel-header{height:auto;min-height:var(--mat-expansion-header-collapsed-state-height);padding:0 12px 0 0}[_nghost-%COMP%]     .mat-expansion-panel-header.mat-expanded{height:auto;min-height:var(--mat-expansion-header-expanded-state-height)}.scrollable-container[_ngcontent-%COMP%]{max-height:calc(100dvh - 195px);overflow-y:auto;padding-top:10px;padding-bottom:10px}.move[_ngcontent-%COMP%]{cursor:move}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:12px}.card-hover[_ngcontent-%COMP%]    :hover .ks-base-card{border:1px solid var(--primary-color)!important}"],changeDetection:0})}}return a})();var kn=(a,i)=>i._id,Tn=()=>({addClass:"text-break border border-1 py-0 px-1"}),Sn=()=>({icon:"icon_menu",color:"var(--mdc-text-button-label-text-color, var(--mat-app-primary))"}),Pn=()=>({icon:"icon_eye_off",color:"#ba1a1a"}),En=()=>({text:"Edit Category"}),Rn=()=>({icon:"icon_edit"}),Mn=(a,i)=>({label:a,prefixIcon:i,matType:"mat-icon-button"}),Ln=()=>({text:"Delete Category"}),Fn=()=>({icon:"icon_delete"}),On=(a,i)=>({label:a,prefixIcon:i,color:"warn",matType:"mat-icon-button"}),An=()=>({icon:"icon_error_triangle"}),Bn=()=>({text:"Add First Group"}),Nn=()=>({icon:"icon_plus_circle"}),Vn=(a,i)=>({label:a,prefixIcon:i,matType:"mat-flat-button"});function jn(a,i){a&1&&P(0,"ks-base-icon",0),a&2&&b("config",_(1,Sn))}function Hn(a,i){a&1&&P(0,"ks-base-icon",11),a&2&&b("config",_(1,Pn))}function $n(a,i){if(a&1){let t=S();p(0,"ks-base-button",13),I("onClick",function(){k(t);let n=m().$implicit,o=m(3);return T(o.AddEditCategory(n))}),h()}a&2&&b("config",E(3,Mn,_(1,En),_(2,Rn)))}function zn(a,i){if(a&1){let t=S();p(0,"ks-base-button",13),I("onClick",function(){k(t);let n=m().$implicit,o=m(3);return T(o.deleteCategory(n))}),h()}a&2&&b("config",E(3,On,_(1,Ln),_(2,Fn)))}function Gn(a,i){if(a&1&&(p(0,"div",6)(1,"ks-base-card",0)(2,"div",7)(3,"div",8),f(4,jn,1,2,"ks-base-icon",0),h(),p(5,"div",9)(6,"div",10),M(7),h(),f(8,Hn,1,2,"ks-base-icon",11),h(),p(9,"div",12),f(10,$n,1,6,"ks-base-button",0)(11,zn,1,6,"ks-base-button",0),h()()()()),a&2){let t=i.$implicit,e=m(3);l(),b("config",_(8,Tn)),l(2),j("move",e.currentScreen.update),l(),g(e.currentScreen.update?4:-1),l(3),et(t.label),l(),g(t.hide?8:-1),l(2),g(e.currentScreen.update?10:-1),l(),g(e.currentScreen.delete?11:-1)}}function Un(a,i){if(a&1){let t=S();p(0,"div",2),P(1,"ks-base-button",0),h(),p(2,"div",3),I("cdkDropListDropped",function(n){k(t);let o=m(2);return T(o.drop(n))}),p(3,"div",4)(4,"div",5),J(5,Gn,12,9,"div",6,kn),h()()()}if(a&2){let t=m(),e=m();l(),b("config",e.categoryButtonConfig()),l(),b("cdkDropListDisabled",!e.currentScreen.update),l(3),tt(t)}}function Wn(a,i){if(a&1){let t=S();p(0,"div",17)(1,"ks-base-button",13),I("onClick",function(){k(t);let n=m(3);return T(n.AddEditCategory())}),h()()}a&2&&(l(),b("config",E(3,Vn,_(1,Bn),_(2,Nn))))}function Qn(a,i){if(a&1&&(p(0,"div",1)(1,"div",14),P(2,"ks-base-icon",15),M(3," No Groups Found "),h(),p(4,"p",16),M(5),h(),f(6,Wn,2,6,"div",17),h()),a&2){let t=m(2);l(2),b("config",_(3,An)),l(3),st(" It looks like you haven\u2019t added any group yet. ",t.currentScreen.insert?"Click the button below to get started by adding your first group!":""," "),l(),g(t.currentScreen.insert?6:-1)}}function qn(a,i){if(a&1&&(f(0,Un,7,2),G(1,"async"),f(2,Qn,7,4,"div",1)),a&2){let t=m();g(i.length?0:U(1,1,t.loaded$)?2:-1)}}var Ai=(()=>{class a{constructor(t,e){this._dialogRef=t,this.data=e,this._dialog=D(dt),this._editMade=!1,this.loaded$=this.data.menuService.loaded$,this.template=this.data.menuService.template,this.categories$=this.data.menuService.group$,this.currentScreen=ht("menu_crud"),this.categoryButtonConfig=B({label:{text:"Add Group"},matType:"mat-flat-button",onClick:()=>{this.AddEditCategory()}}),this.cardConfig={header:{title:{text:"Menu Groups",tag:"h3",fontWeight:"700"},position:"center",suffixButton:{label:{text:"Close"},matType:"mat-icon-button",prefixIcon:{icon:"icon_x_circle"},onClick:()=>{this._dialogRef.close(this._editMade)}}},content:{addClass:"card p-2 h-100"},footer:{buttons:[{label:{text:"Close"},matType:"mat-stroked-button",onClick:()=>{this._dialogRef.close(this._editMade)}}],position:"center"}}}drop(t){this.categories$.pipe(w(1)).subscribe(e=>{nt(e,t.previousIndex,t.currentIndex),e.forEach((n,o)=>{n.order=o+1})}),this._editMade=!0}AddEditCategory(t){let e=this.template(),n={hideClearButton:!0,title:{text:t?"Edit Group":"Add Group"},form:{value:t,groups:[{id:1,name:{text:"Images"},order:0},{id:2,name:{text:"Details"},order:1}],fields:[{name:"label",label:{text:"Group Name"},required:!0,type:"text",groupId:2},{name:"img",label:{text:"Icon"},type:"image",groupId:1,hide:!e.category_img,maxSizeInMB:e.category_img_max_size},{name:"bgImg",label:{text:"Image"},type:"image",groupId:1,hide:!e.category_bgImg,maxSizeInMB:e.category_bgImg_max_size},{name:"hide",label:{text:"Is Hidden"},type:"checkbox",groupId:2}]}};this._dialog.openFormPopup(n,"700px").afterClosed().pipe(w(1)).subscribe(o=>{o&&(t?L.UpdateArrayBehaviorSubject(this.data.menuService.group$,x(x({},t),o),"edit","_id"):L.UpdateArrayBehaviorSubject(this.data.menuService.group$,A(x({},o),{_id:"newCategory"+new Date().getTime().toString(),order:new Date().getTime()}),"add","_id"),this._editMade=!0)})}deleteCategory(t){let e={title:{text:"Confirm Delete"},message:{text:"Are you sure you want to delete this group?"}};this._dialog.openConfirmPopup(e).afterClosed().pipe(w(1)).subscribe(n=>{n&&(L.UpdateArrayBehaviorSubject(this.data.menuService.group$,t,"delete","_id"),t._id.startsWith("new")||this.data.menuService.deletedCategories.push(t._id),this._editMade=!0)})}static{this.\u0275fac=function(e){return new(e||a)(v(Ke),v(Ze))}}static{this.\u0275cmp=H({type:a,selectors:[["ks-solutions-menu-categories"]],standalone:!0,features:[z],decls:3,vars:4,consts:[[3,"config"],[1,"mx-auto","text-center","pt-4",2,"max-width","400px"],[1,"text-end","pe-3"],["cdkDropListGroup","","cdkDropList","","cdkScrollable","",1,"scrollable-container",3,"cdkDropListDropped","cdkDropListDisabled"],[1,"container-fluid"],[1,"row"],["cdkDrag","",1,"col-12","mb-2","card-hover"],[2,"display","grid","grid-template-columns","auto 1fr auto","min-height","40px"],["cdkDragHandle","",1,"p-2","text-primary","d-flex","align-items-center","h-100"],[1,"d-flex","align-items-center","h-100"],[1,"text-break"],[1,"ms-2",3,"config"],[1,"p-2","text-primary","d-flex","align-items-center","h-100"],[3,"onClick","config"],[1,"h4","d-flex","align-items-center","justify-content-center"],[1,"me-3",3,"config"],[1,"mb-4",2,"color","#6c757d"],[1,"text-center"]],template:function(e,n){if(e&1&&(p(0,"ks-base-card",0),f(1,qn,3,3),G(2,"async"),h()),e&2){let o;b("config",n.cardConfig),l(),g((o=U(2,2,n.categories$))?1:-1,o)}},dependencies:[Bt,ct,Lt,Ot,lt,At,Xt,Mt,Yt,Zt,Kt,qt],styles:["[_nghost-%COMP%]{--row-border: 1px solid rgb(193, 193, 193)}[_nghost-%COMP%]     .mat-expansion-panel-body{padding:0 0 8px!important}[_nghost-%COMP%]     .mat-expansion-panel-header{height:auto;min-height:var(--mat-expansion-header-collapsed-state-height);padding:0 12px 0 0}[_nghost-%COMP%]     .mat-expansion-panel-header.mat-expanded{height:auto;min-height:var(--mat-expansion-header-expanded-state-height)}.scrollable-container[_ngcontent-%COMP%]{max-height:calc(100dvh - 195px);overflow-y:auto;padding-top:10px;padding-bottom:10px}.move[_ngcontent-%COMP%]{cursor:move}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:12px}.card-hover[_ngcontent-%COMP%]    :hover .ks-base-card{border:1px solid var(--primary-color)!important}"],changeDetection:0})}}return a})();var Kn=()=>({text:"Add Category"}),Zn=()=>({icon:"icon_plus_circle"}),Yn=(a,i)=>({label:a,prefixIcon:i,matType:"mat-icon-button"});function Xn(a,i){if(a&1&&(M(0),G(1,"async")),a&2){let t=m(2);st(" ",U(1,1,t.menuName$)," ")}}function Jn(a,i){if(a&1){let t=S();p(0,"ks-base-button",5),I("onClick",function(){k(t);let n=m(2);return T(n.addCategory$.next())}),h()}a&2&&b("config",E(3,Yn,_(1,Kn),_(2,Zn)))}function ta(a,i){if(a&1&&P(0,"ks-base-button",4),a&2){let t=m(2);b("config",t.categoryButtonConfig())}}function ea(a,i){if(a&1&&(p(0,"div",0)(1,"div",3),f(2,Xn,2,3),h(),f(3,Jn,1,6,"ks-base-button",4),G(4,"async"),f(5,ta,1,1,"ks-base-button",4),P(6,"ks-base-button",4),h()),a&2){let t,e=m();l(2),g(e.innerWidth>700?2:-1),l(),g((t=U(4,4,e.content$))!=null&&t.length?3:-1),l(2),g(e.template().menu_category?5:-1),l(),b("config",e.buttonConfig())}}var Go=(()=>{class a{constructor(){this._destroyRef=D(St),this._dialog=D(dt),this._menuService=D(It),this._navService=D(Nt),this._menuId="",this.innerWidth=window.innerWidth,this.template=this._menuService.template,this.menuName$=this._menuService.menuName$,this.currentScreen=ht("menu_crud"),this.isNewStore=B(!1),this.showSaveButton=B(!1),this.addCategory$=new C,this.content$=this._menuService.content$,this.categoryButtonConfig=B({label:{text:"Groups"},matType:"mat-flat-button",onClick:()=>{this._openGroups()}}),this.buttonConfig=B({label:{text:"Add Info"},matType:"mat-flat-button",onClick:()=>{this._openMenu(this._store||{currency:"$",mainLang:"en",menuId:this._menuId,storeName:"",templateId:""})}})}ngOnInit(){this._menuId=this._navService.readUrlParams().MenuId,this._navService.updateNav({show:!0,back:!0,title:this.currentScreen.screenName,buttons:[{label:{text:"Save"},prefixIcon:{icon:"icon_save"},show:this.showSaveButton,onClick:()=>{this._save()}}]}),this._menuId?this._menuService.getMenuById(this._menuId):this._navService.navigateTo(Ct.LAYOUT.children.HOME.route),this._menuService.store$.pipe(Ft(this._destroyRef)).subscribe(t=>{t?._id?(this.isNewStore.set(!1),this._store=t,this.buttonConfig.update(e=>A(x({},e),{label:A(x({},e.label),{text:"Edit Info"})}))):this.isNewStore.set(!0)})}_openGroups(){this._dialog.open(Ai,{data:{menuService:this._menuService},width:"95vw",maxWidth:"700px",maxHeight:"95vh"}).afterClosed().pipe(w(1)).subscribe(t=>{t&&this.showSaveButton.set(!0)})}_save(){if(!this._store){this._dialog.openConfirmPopup({title:{text:"Message"},message:{text:"You need to fill the menu info before saving!"},hideYesNo:!0});return}this._menuService.group$.pipe(w(1)).subscribe(t=>{let e=t.map(n=>n._id);if(this._menuService.template()?.menu_category&&!e.length){this._dialog.openConfirmPopup({title:{text:"Message"},message:{text:"You need to have at least one group!"},hideYesNo:!0});return}this._menuService.content$.pipe(w(1)).subscribe(n=>{if(this._menuService.template()?.menu_category){let r=n.filter(s=>!e.includes(s.categoryId)).map(s=>({text:s.label,tag:"p",addClass:"mb-0"}));if(r.length){this._dialog.openConfirmPopup({title:{text:"Message"},message:[{text:"You need to select a group for the following categories:",tag:"p",addClass:""},...r],hideYesNo:!0});return}}t.forEach(r=>{r.menuId=this._menuId}),n.forEach(r=>{r.menuId=this._menuId,r.items.forEach(s=>{s.menuId=this._menuId})});let o={store:this._store,sub_categories:n,categories:t};this._menuService.saveMenu(o,this._menuId),this.showSaveButton.set(!1)})})}_openMenu(t){let e={hideClearButton:!0,title:{text:t._id?"Edit Menu info":"Add Menu Info"},form:this._getForm(t)};this._dialog.openFormPopup(e,"95vw").afterClosed().pipe(w(1)).subscribe(n=>{if(n){this.showSaveButton.set(!0);let o={email:n.email,location:n.location,locationTranslation:n.locationTranslation,locationUrl:n.locationUrl,facebookUrl:n.facebookUrl,instagramUrl:n.instagramUrl,whatsappUrl:n.whatsappUrl};this._store=A(x(x({},this._store||{}),n),{sm:o})}})}_getForm(t){let e=this._menuService.template(),n=!e.menu_translation;return{value:x(x({},t),t.sm||{}),groups:[{id:4,name:{text:"Images"},order:0},{id:3,name:{text:"General Info"},order:1},{id:2,name:{text:"Language"},order:2},{id:1,name:{text:"Social Media"},order:3}],fields:[{label:{text:"Menu Name"},name:"storeName",type:"text",required:!0,groupId:3},{label:{text:"Currency"},name:"currency",type:"select",options:[{name:"$",value:"$"},{name:"LL",value:"LL"}],required:!0,groupId:3},{label:{text:"Main Lang"},name:"mainLang",type:"select",options:[{name:"English",value:"en"},{name:"francais",value:"fr"},{name:"arabic",value:"ar"}],hide:n,groupId:2},{label:{text:"Quote"},name:"quote",type:"textaria",groupId:3,hide:!e.menu_quote},{label:{text:"About Us"},name:"aboutUs",type:"textaria",groupId:3,hide:!e.menu_aboutUs},{label:{text:"About Us Translation"},name:"aboutUsTranslation",type:"text",groupId:3,hide:n||!e.menu_aboutUs},{label:{text:"Store Logo"},name:"storeLogo",type:"image",groupId:4,hide:!e.menu_storeLogo,maxSizeInMB:e.menu_storeLogo_max_size},{label:{text:"Phone Number Link"},name:"phoneNumber",type:"text",groupId:1,hide:!e.menu_phoneNumber},{label:{text:"Displayed Phone Number"},name:"displayedPhoneNumber",type:"text",conditions:[{anyValue:!0,required:["phoneNumber"]}],groupId:1,hide:!e.menu_phoneNumber},{label:{text:"Languages"},hide:n,name:"languages",type:"select",multiple:!0,options:[{name:"English",value:"en"},{name:"francais",value:"fr"},{name:"arabic",value:"ar"}],groupId:2},{label:{text:"Email"},name:"email",type:"text",extraValidators:[ii],groupId:1,hide:!e.menu_email},{label:{text:"Location"},name:"location",type:"text",groupId:1,hide:!e.menu_location},{label:{text:"Location translation"},hide:n||!e.menu_location,name:"locationTranslation",type:"text",groupId:1},{label:{text:"Location Link"},name:"locationUrl",type:"text",conditions:[{anyValue:!0,required:["location"]}],groupId:1,hide:!e.menu_location},{label:{text:"Facebook Link"},name:"facebookUrl",type:"text",groupId:1,hide:!e.menu_facebook},{label:{text:"Instagram Link"},name:"instagramUrl",type:"text",groupId:1,hide:!e.menu_instagram},{label:{text:"WhatsApp Link"},name:"whatsappUrl",type:"text",groupId:1,hide:!e.menu_whatsapp}]}}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=H({type:a,selectors:[["ks-solutions-menu"]],standalone:!0,features:[$([It]),z],decls:3,vars:2,consts:[[1,"text-end","d-flex","align-items-center","justify-content-end","gap-2"],[1,"pt-2"],[3,"editMade","addCategory$"],[1,"me-auto","text-start","h6","mb-0"],[3,"config"],[3,"onClick","config"]],template:function(e,n){e&1&&(f(0,ea,7,6,"div",0),p(1,"div",1)(2,"ks-solutions-content",2),I("editMade",function(){return n.showSaveButton.set(!0)}),h()()),e&2&&(g(n.currentScreen.update&&!n.isNewStore()||n.currentScreen.insert&&n.isNewStore()?0:-1),l(2),b("addCategory$",n.addCategory$))},dependencies:[ai,Oi,lt,ct],changeDetection:0})}}return a})();export{Go as MenuComponent};
