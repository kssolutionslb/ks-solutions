import{a as j}from"./chunk-V4S4ILHZ.js";import{a as Y}from"./chunk-ZAKCWEXA.js";import{a as u}from"./chunk-BLGJQ3NA.js";import{a as k}from"./chunk-MIQK74YD.js";import{a as v}from"./chunk-XELMOVSA.js";import"./chunk-HMNUYURD.js";import{a as I}from"./chunk-N2PVEWVS.js";import{aa as N,da as w,la as O,ra as U}from"./chunk-MMBMDBOW.js";import"./chunk-CARY4E7O.js";import"./chunk-4KKA7PE6.js";import{Ab as l,Fc as b,Gc as T,Ib as d,N as $,Ob as m,Pb as C,Rb as g,Sb as y,Tb as a,Ub as s,Vb as p,a as D,b as M,cc as _,ea as B,ib as o,id as H,ka as c,oa as F,tb as f,vc as P,wc as R,xc as x,y as S}from"./chunk-VO6IE2C5.js";var E=(()=>{class t{constructor(){this._navbarService=c(I),this._networkService=c(w)}getServiceById(e){return this._networkService.post(k.SERVICE_DATA.byId,{serviceId:e})}saveService(e,i,r){return this._networkService.patch(k.SERVICE_DATA.bulkSave,Y({serviceId:i,data:e,serviceDataId:r}))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();var G=()=>({text:"Menus",tag:"h2",fontWeight:"500",case:"titlecase"}),W=()=>({text:"Services",tag:"h2",fontWeight:"500",case:"titlecase"}),K=()=>({text:"Restaurant Management Systems",tag:"h2",fontWeight:"500",case:"titlecase"});function q(t,n){if(t&1&&(a(0,"div",3)(1,"div",4),p(2,"ks-base-card",5),s()()),t&2){let e=n.$implicit,i=_(3);o(2),d("config",i.getCardConfig(e))}}function z(t,n){if(t&1&&(p(0,"ks-base-label",1),a(1,"div",2),g(2,q,3,1,"div",3,C),s()),t&2){let e=_();d("config",x(1,G)),o(2),y(e)}}function J(t,n){t&1&&l(0,z,4,2),t&2&&m(n.length?0:-1)}function Q(t,n){if(t&1&&(a(0,"div",3)(1,"div",4),p(2,"ks-base-card",5),s()()),t&2){let e=n.$implicit,i=_(3);o(2),d("config",i.getServiceCardConfig(e))}}function X(t,n){if(t&1&&(a(0,"div",6),p(1,"ks-base-label",1),a(2,"div",2),g(3,Q,3,1,"div",3,C),s()()),t&2){let e=_();o(),d("config",x(1,W)),o(2),y(e)}}function Z(t,n){t&1&&l(0,X,5,2,"div",6),t&2&&m(n.length?0:-1)}function ee(t,n){if(t&1&&(a(0,"div",3)(1,"div",4),p(2,"ks-base-card",5),s()()),t&2){let e=n.$implicit,i=_(3);o(2),d("config",i.getRmsConfig(e))}}function te(t,n){if(t&1&&(a(0,"div",6),p(1,"ks-base-label",1),a(2,"div",2),g(3,ee,3,1,"div",3,C),s()()),t&2){let e=_();o(),d("config",x(1,K)),o(2),y(e)}}function ie(t,n){t&1&&l(0,te,5,2,"div",6),t&2&&m(n.length?0:-1)}var ye=(()=>{class t{constructor(){this._lovService=c(j),this._dialog=c(N),this._navService=c(I),this._serviceDataService=c(E),this._servicesAndMenus$=this._lovService.menusAndServicesLov$,this._menuInvoiceScreen=v("menu_invoice").fullPath,this._menuSettingsScreen=v("menu_settings").fullPath,this._serviceSettingsScreen=v("service_settings").fullPath,this._serviceDataScreen=v("service_data"),this._menuCrudScreen=v("menu_crud").fullPath,this._rmsScreen=v("rms").fullPath,this.rms$=this._servicesAndMenus$.pipe(S(e=>e.filter(i=>i.type==="rms"))),this.menus$=this._servicesAndMenus$.pipe(S(e=>e.filter(i=>i.type==="menu"))),this.services$=this._servicesAndMenus$.pipe(S(e=>e.filter(i=>i.type==="service")))}ngOnInit(){this._lovService.getMenusAndServicesLov(),this._navService.updateNav({show:!1,back:!1})}getCardConfig(e){return{header:{title:{text:e.name,tag:"h4",translate:!1,addClass:"pt-3"},suffixButton:this._menuSettingsScreen?{label:{text:"Settings"},prefixIcon:{icon:"icon_settings"},matType:"mat-icon-button",onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.MENU_SETTINGS.route,{MenuId:e._id})}}:void 0},footer:{buttons:[{label:{text:"Invoice"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_file"},onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.INVOICE.route,{MenuId:e._id})},hide:f(!(e.hasInvoice&&this._menuInvoiceScreen))},{label:{text:"Edit Menu Data"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_edit"},onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.MENU.route,{MenuId:e._id})},hide:f(!this._menuCrudScreen)}],position:"center"},addClass:"h-100"}}getRmsConfig(e){return{header:{title:{text:e.name,tag:"h4",translate:!1,addClass:"pt-3"}},footer:{buttons:[{label:{text:"Open"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_arrow_level_up"},onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.RMS.route,{RmsId:e._id})},hide:f(!this._rmsScreen)}],position:"center"},addClass:"h-100"}}getServiceCardConfig(e){return{header:{title:{text:e.name,tag:"h4"},suffixButton:this._serviceSettingsScreen?{label:{text:"Settings"},prefixIcon:{icon:"icon_settings"},matType:"mat-icon-button",onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.SERVICE_SETTINGS.route,{ServiceId:e._id})}}:void 0},footer:{buttons:[{label:{text:"Edit Service Data"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_edit"},onClick:()=>{this._serviceDataService.getServiceById(e._id).pipe($(1)).subscribe(i=>{if(i.data){let r=i.data;this._dialog.openFormPopup({hideClearButton:!0,title:{text:"Service Settings"},form:M(D({},r.service.fields),{value:r?.data?.data}),beforeCloseObservable:h=>this._serviceDataService.saveService(h,e._id,r?.data?._id)})}})},hide:f(!this._serviceDataScreen?.fullPath||!e.editable)}],position:"center"},addClass:"h-100"}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=F({type:t,selectors:[["ks-solutions-layout-home-page"]],standalone:!0,features:[P([E]),R],decls:7,vars:9,consts:[[1,"container-fluid","my-5"],[1,"text-center",3,"config"],[1,"row"],[1,"col-12","col-sm-6","col-md-6","col-lg-4","col-xl-3","mb-4"],[1,"cs-card","h-100","shadow-sm","border","border-1","rounded-2"],[3,"config"],[1,"mt-3"]],template:function(i,r){if(i&1&&(a(0,"div",0),l(1,J,1,1),b(2,"async"),l(3,Z,1,1),b(4,"async"),l(5,ie,1,1),b(6,"async"),s()),i&2){let h,L,A;o(),m((h=T(2,3,r.menus$))?1:-1,h),o(2),m((L=T(4,5,r.services$))?3:-1,L),o(2),m((A=T(6,7,r.rms$))?5:-1,A)}},dependencies:[H,O,U],styles:[".cs-card[_ngcontent-%COMP%]{transition:transform .3s}"],changeDetection:0})}}return t})();export{ye as LayoutHomeComponent};
