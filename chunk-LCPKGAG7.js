import{a as U}from"./chunk-54SQSRZL.js";import{a as B}from"./chunk-WKII47CO.js";import"./chunk-5BWCYXSX.js";import{a as V}from"./chunk-ACYZVNWI.js";import"./chunk-UA3J3SVI.js";import"./chunk-HMNUYURD.js";import{a as E}from"./chunk-5LHP7IWU.js";import{C as w,E as S,F as I,G as h,I as T,K as q,N as M,O as x,ga as L,ia as D,ma as G,na as N}from"./chunk-7Y4QU53B.js";import"./chunk-CARY4E7O.js";import{m as R}from"./chunk-QLWHFAAO.js";import{$b as f,Fa as _,Hb as i,N as P,Nb as b,Sb as c,Tb as m,Ub as u,hb as n,ka as d,mc as v,oa as g,sb as l,vc as y,wc as r,xc as k,yc as C,zb as F,zc as p}from"./chunk-72DPVO72.js";var W=e=>({title:"Reset Password",subTitle:"Please enter your new password.",isReqInProgress:e}),z=()=>({text:"Password"}),A=()=>({icon:"icon_lock",color:"var(--primary-color)"}),O=(e,a,t)=>({label:e,control:a,type:"password",prefixIcon:t}),H=()=>({text:"Confirm Password"}),J=()=>({text:"Go back to login"}),K=()=>({icon:"icon_backward"}),Q=(e,a)=>({label:e,prefixIcon:a}),X=()=>({text:"Reset Password"}),Y=()=>({"min-height":"45px"}),Z=(e,a,t)=>({label:e,addStyles:a,matType:"mat-stroked-button",type:"submit",color:"primary",disabled:t,takeFullWidth:!0});function $(e,a){e&1&&(c(0,"div",3),v(1,"Passwords does not match"),m())}var fe=(()=>{class e{constructor(){this._authService=d(B),this._route=d(R),this._destroyRef=d(_),this._navbar=d(E),this.noMatch=l(!1),this.isReqInProgress=l(!1),this.resetPasswordForm=new I({newPassword:new h("",[w.required,D({minLength:8,maxLength:20,preventSpace:!0,forceNumbers:!0,forceLowerCase:!0,forceUppercase:!0,forceSpecialCharacters:!0})]),confirmPassword:new h("",[w.required])})}ngOnInit(){this._route.queryParamMap.subscribe(t=>{let s=t.get("token");this._token=s?decodeURIComponent(s):""}),this.resetPasswordForm.valueChanges.pipe(x(this._destroyRef)).subscribe(t=>{t.confirmPassword&&t.newPassword!==t.confirmPassword?this.noMatch.set(!0):this.noMatch.set(!1)})}goToLogin(){this._navbar.navigateTo(V.LOGIN.route)}resetPassword(){this.noMatch()||L(this.resetPasswordForm)&&this._token&&this.resetPasswordForm.value.newPassword&&(this.isReqInProgress.set(!0),this._authService.resetPassword(this._token,this.resetPasswordForm.value.newPassword).pipe(P(1)).subscribe({next:()=>{this.goToLogin(),this.isReqInProgress.set(!1)},error:()=>{this.isReqInProgress.set(!1)}}))}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=g({type:e,selectors:[["ks-solutions-reset-password"]],standalone:!0,features:[y],decls:10,vars:32,consts:[[3,"config"],[1,"px-sm-1","px-md-4","py-2",3,"ngSubmit","formGroup"],[1,"mt-2"],[1,"text-danger","text-center"],[1,"mb-3","small","text-end"],[3,"onClick","config"],[1,"mt-4",3,"config"]],template:function(s,o){s&1&&(c(0,"ks-solutions-form-layout",0)(1,"form",1),f("ngSubmit",function(){return o.resetPassword()}),c(2,"div",2),u(3,"ks-base-input",0),m(),c(4,"div",2),u(5,"ks-base-input",0),m(),F(6,$,2,0,"div",3),c(7,"div",4)(8,"ks-base-button",5),f("onClick",function(){return o.goToLogin()}),m()(),u(9,"ks-base-button",6),m()()),s&2&&(i("config",k(7,W,o.isReqInProgress)),n(),i("formGroup",o.resetPasswordForm),n(2),i("config",p(11,O,r(9,z),o.resetPasswordForm.controls.newPassword,r(10,A))),n(2),i("config",p(17,O,r(15,H),o.resetPasswordForm.controls.confirmPassword,r(16,A))),n(),b(o.noMatch()===!0&&o.resetPasswordForm.controls.newPassword.dirty&&o.resetPasswordForm.controls.confirmPassword.dirty?6:-1),n(2),i("config",C(23,Q,r(21,J),r(22,K))),n(),i("config",p(28,Z,r(26,X),r(27,Y),o.isReqInProgress)))},dependencies:[N,M,T,S,q,G,U],changeDetection:0})}}return e})();export{fe as ResetPasswordComponent};
