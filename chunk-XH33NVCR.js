import{a as z}from"./chunk-ZAKCWEXA.js";import{a as K}from"./chunk-DBDYZ5BL.js";import{a as u}from"./chunk-FQRZVHIL.js";import{a as E}from"./chunk-O4Z7XCTG.js";import{a as m}from"./chunk-EYMYV4JT.js";import{a as V}from"./chunk-HMNUYURD.js";import{a as k}from"./chunk-DGQRDBDH.js";import{ba as H,ea as N,fa as U,la as j,ma as Y,sa as G}from"./chunk-YIOKFAT3.js";import"./chunk-CARY4E7O.js";import"./chunk-WLEIZKK2.js";import{Bb as _,Gc as y,Hc as T,Jb as l,N as D,Pb as d,Qb as C,Sb as x,Tb as b,Ub as o,Vb as r,Wb as p,a as O,b as A,dc as h,ea as w,jb as a,ka as s,kd as R,oa as B,oc as I,ub as v,wc as F,xc as $,y as S,yc as f}from"./chunk-E5CLUL7I.js";var P=(()=>{class t{constructor(){this._navbarService=s(k),this._networkService=s(N)}getServiceById(e){return this._networkService.post(E.SERVICE_DATA.byId,{serviceId:e})}saveService(e,i,c){return this._networkService.patch(E.SERVICE_DATA.bulkSave,z({serviceId:i,data:e,serviceDataId:c}))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=w({token:t,factory:t.\u0275fac})}}return t})();var q=()=>({icon:"icon_search",size:"lg"}),J=()=>({text:"Menus",tag:"h2",fontWeight:"500",case:"titlecase"}),Q=()=>({text:"Services",tag:"h2",fontWeight:"500",case:"titlecase"}),X=()=>({text:"Restaurant Management Systems",tag:"h2",fontWeight:"500",case:"titlecase"});function Z(t,n){t&1&&(o(0,"div",1)(1,"div",2),p(2,"ks-base-icon",3),r(),o(3,"div",4)(4,"h3",5),I(5,"Search car plates instantly"),r(),o(6,"p",6),I(7,"Click the search icon in the toolbar to find car plates by number."),r()()()),t&2&&(a(2),l("config",f(1,q)))}function ee(t,n){if(t&1&&(o(0,"div",9)(1,"div",10),p(2,"ks-base-card",3),r()()),t&2){let e=n.$implicit,i=h(3);a(2),l("config",i.getCardConfig(e))}}function te(t,n){if(t&1&&(p(0,"ks-base-label",7),o(1,"div",8),x(2,ee,3,1,"div",9,C),r()),t&2){let e=h();l("config",f(1,J)),a(2),b(e)}}function ie(t,n){t&1&&_(0,te,4,2),t&2&&d(n.length?0:-1)}function ne(t,n){if(t&1&&(o(0,"div",9)(1,"div",10),p(2,"ks-base-card",3),r()()),t&2){let e=n.$implicit,i=h(3);a(2),l("config",i.getServiceCardConfig(e))}}function ae(t,n){if(t&1&&(o(0,"div",11),p(1,"ks-base-label",7),o(2,"div",8),x(3,ne,3,1,"div",9,C),r()()),t&2){let e=h();a(),l("config",f(1,Q)),a(2),b(e)}}function oe(t,n){t&1&&_(0,ae,5,2,"div",11),t&2&&d(n.length?0:-1)}function re(t,n){if(t&1&&(o(0,"div",9)(1,"div",10),p(2,"ks-base-card",3),r()()),t&2){let e=n.$implicit,i=h(3);a(2),l("config",i.getRmsConfig(e))}}function ce(t,n){if(t&1&&(o(0,"div",11),p(1,"ks-base-label",7),o(2,"div",8),x(3,re,3,1,"div",9,C),r()()),t&2){let e=h();a(),l("config",f(1,X)),a(2),b(e)}}function se(t,n){t&1&&_(0,ce,5,2,"div",11),t&2&&d(n.length?0:-1)}var Pe=(()=>{class t{constructor(){this._lovService=s(K),this._dialog=s(H),this._navService=s(k),this._storageService=s(U),this._serviceDataService=s(P),this._servicesAndMenus$=this._lovService.menusAndServicesLov$,this._menuInvoiceScreen=m("menu_invoice").fullPath,this._menuSettingsScreen=m("menu_settings").fullPath,this._serviceSettingsScreen=m("service_settings").fullPath,this._serviceDataScreen=m("service_data"),this._menuCrudScreen=m("menu_crud").fullPath,this._rmsScreen=m("rms").fullPath,this._carsPlatesListingScreen=m("cars_plates_listing").fullPath,this._user=this._storageService.getItem(V.SS.user,!0),this.rms$=this._servicesAndMenus$.pipe(S(e=>e.filter(i=>i.type==="rms"))),this.menus$=this._servicesAndMenus$.pipe(S(e=>e.filter(i=>i.type==="menu"))),this.services$=this._servicesAndMenus$.pipe(S(e=>e.filter(i=>i.type==="service"))),this.onlyCarPlatesUser=!!this._carsPlatesListingScreen&&this._user.screens.filter(e=>e.ism===1).length===0}ngOnInit(){this._lovService.getMenusAndServicesLov(),this._navService.updateNav({show:!1,back:!1})}getCardConfig(e){return{header:{title:{text:e.name,tag:"h4",translate:!1,addClass:"pt-3"},suffixButton:this._menuSettingsScreen?{label:{text:"Settings"},prefixIcon:{icon:"icon_settings"},matType:"mat-icon-button",onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.MENU_SETTINGS.route,{MenuId:e._id})}}:void 0},footer:{buttons:[{label:{text:"Invoice"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_file"},onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.INVOICE.route,{MenuId:e._id})},hide:v(!(e.hasInvoice&&this._menuInvoiceScreen))},{label:{text:"Edit Menu Data"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_edit"},onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.MENU.route,{MenuId:e._id})},hide:v(!this._menuCrudScreen)}],position:"center"},addClass:"h-100"}}getRmsConfig(e){return{header:{title:{text:e.name,tag:"h4",translate:!1,addClass:"pt-3"}},footer:{buttons:[{label:{text:"Open"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_arrow_level_up"},onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.RMS.route,{RmsId:e._id})},hide:v(!this._rmsScreen)}],position:"center"},addClass:"h-100"}}getServiceCardConfig(e){return{header:{title:{text:e.name,tag:"h4"},suffixButton:this._serviceSettingsScreen?{label:{text:"Settings"},prefixIcon:{icon:"icon_settings"},matType:"mat-icon-button",onClick:()=>{this._navService.navigateTo(u.LAYOUT.children.SERVICE_SETTINGS.route,{ServiceId:e._id})}}:void 0},footer:{buttons:[{label:{text:"Edit Service Data"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_edit"},onClick:()=>{this._serviceDataService.getServiceById(e._id).pipe(D(1)).subscribe(i=>{if(i.data){let c=i.data;this._dialog.openFormPopup({hideClearButton:!0,title:{text:"Service Settings"},form:A(O({},c.service.fields),{value:c?.data?.data}),beforeCloseObservable:g=>this._serviceDataService.saveService(g,e._id,c?.data?._id)})}})},hide:v(!this._serviceDataScreen?.fullPath||!e.editable)}],position:"center"},addClass:"h-100"}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=B({type:t,selectors:[["ks-solutions-layout-home-page"]],standalone:!0,features:[F([P]),$],decls:8,vars:10,consts:[[1,"container-fluid","my-5"],[1,"car-plate-hint"],["aria-hidden","true",1,"car-plate-hint__icon"],[3,"config"],[1,"car-plate-hint__content"],[1,"car-plate-hint__title"],[1,"car-plate-hint__text"],[1,"text-center",3,"config"],[1,"row"],[1,"col-12","col-sm-6","col-md-6","col-lg-4","col-xl-3","mb-4"],[1,"cs-card","h-100","shadow-sm","border","border-1","rounded-2"],[1,"mt-3"]],template:function(i,c){if(i&1&&(o(0,"div",0),_(1,Z,8,2,"div",1)(2,ie,1,1),y(3,"async"),_(4,oe,1,1),y(5,"async"),_(6,se,1,1),y(7,"async"),r()),i&2){let g,M,L;a(),d(c.onlyCarPlatesUser?1:-1),a(),d((g=T(3,4,c.menus$))?2:-1,g),a(2),d((M=T(5,6,c.services$))?4:-1,M),a(2),d((L=T(7,8,c.rms$))?6:-1,L)}},dependencies:[R,Y,G,j],styles:[".cs-card[_ngcontent-%COMP%]{transition:transform .3s}[_nghost-%COMP%]{--car-plate-hint-bg: #f7f9fc;--car-plate-hint-border: rgba(0, 0, 0, .08);--car-plate-hint-text: var(--cs-text-color);--car-plate-hint-muted: rgba(0, 0, 0, .6);--car-plate-hint-icon-bg: rgba(0, 92, 193, .12)}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{--car-plate-hint-bg: #121418;--car-plate-hint-border: rgba(255, 255, 255, .08);--car-plate-hint-text: var(--cs-text-color);--car-plate-hint-muted: rgba(255, 255, 255, .7);--car-plate-hint-icon-bg: rgba(19, 209, 221, .15)}.car-plate-hint[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;padding:28px 32px;margin-bottom:24px;border-radius:16px;background:var(--car-plate-hint-bg);border:1px solid var(--car-plate-hint-border);box-shadow:0 12px 30px #00000014}.car-plate-hint__icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:18px;background:var(--car-plate-hint-icon-bg);display:flex;align-items:center;justify-content:center;flex-shrink:0}.car-plate-hint__content[_ngcontent-%COMP%]{flex:1;min-width:0}.car-plate-hint__title[_ngcontent-%COMP%]{font-size:1.35rem;margin:0 0 6px;color:var(--car-plate-hint-text)}.car-plate-hint__text[_ngcontent-%COMP%]{margin:0 0 16px;font-size:1rem;color:var(--car-plate-hint-muted)}@media (max-width: 768px){.car-plate-hint[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"],changeDetection:0})}}return t})();export{Pe as LayoutHomeComponent};
