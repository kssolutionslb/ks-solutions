import{a as j}from"./chunk-2HFJK4M5.js";import{a as U}from"./chunk-ZAKCWEXA.js";import{a as v}from"./chunk-ACYZVNWI.js";import{a as k}from"./chunk-7YJWRT5B.js";import{a as _}from"./chunk-GQ637NOE.js";import"./chunk-HMNUYURD.js";import{a as S}from"./chunk-72TK6UK2.js";import{aa as H,da as w,la as O,ra as R}from"./chunk-XXZS4MWG.js";import"./chunk-CARY4E7O.js";import"./chunk-4KKA7PE6.js";import{Ab as c,Fc as T,Gc as I,Ib as p,N as M,Ob as s,Pb as g,Rb as y,Sb as x,Tb as l,Ub as m,Vb as u,a as D,b as A,cc as d,ea as F,ib as r,id as N,ka as a,oa as P,tb as h,vc as $,wc as B,xc as b,y as C}from"./chunk-VO6IE2C5.js";var E=(()=>{class e{constructor(){this._navbarService=a(S),this._networkService=a(w)}getServiceById(t){return this._networkService.post(k.SERVICE_DATA.byId,{serviceId:t})}saveService(t,i,o){return this._networkService.patch(k.SERVICE_DATA.bulkSave,U({serviceId:i,data:t,serviceDataId:o}))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=F({token:e,factory:e.\u0275fac})}}return e})();var Y=()=>({text:"Menus",tag:"h2",fontWeight:"500",case:"titlecase"}),G=()=>({text:"Services",tag:"h2",fontWeight:"500",case:"titlecase"});function K(e,n){if(e&1&&(l(0,"div",3)(1,"div",4),u(2,"ks-base-card",5),m()()),e&2){let t=d().$implicit,i=d(3);r(2),p("config",i.getCardConfig(t))}}function W(e,n){if(e&1&&c(0,K,3,1,"div",3),e&2){let t=n.$implicit;s(t.type==="menu"?0:-1)}}function q(e,n){if(e&1&&(u(0,"ks-base-label",1),l(1,"div",2),y(2,W,1,1,null,null,g),m()),e&2){let t=d();p("config",b(1,Y)),r(2),x(t)}}function z(e,n){e&1&&c(0,q,4,2),e&2&&s(n.length?0:-1)}function J(e,n){if(e&1&&(l(0,"div",3)(1,"div",4),u(2,"ks-base-card",5),m()()),e&2){let t=d().$implicit,i=d(3);r(2),p("config",i.getServiceCardConfig(t))}}function Q(e,n){if(e&1&&c(0,J,3,1,"div",3),e&2){let t=n.$implicit;s(t.type==="service"?0:-1)}}function X(e,n){if(e&1&&(l(0,"div",6),u(1,"ks-base-label",1),l(2,"div",2),y(3,Q,1,1,null,null,g),m()()),e&2){let t=d();r(),p("config",b(1,G)),r(2),x(t)}}function Z(e,n){e&1&&c(0,X,5,2,"div",6),e&2&&s(n.length?0:-1)}var Se=(()=>{class e{constructor(){this._lovService=a(j),this._dialog=a(H),this._navService=a(S),this._serviceDataService=a(E),this._servicesAndMenus$=this._lovService.menusAndServicesLov$,this._menuInvoiceScreen=_("menu_invoice").fullPath,this._menuSettingsScreen=_("menu_settings").fullPath,this._serviceSettingsScreen=_("service_settings").fullPath,this._serviceDataScreen=_("service_data"),this._menuCrudScreen=_("menu_crud").fullPath,this.menus$=this._servicesAndMenus$.pipe(C(t=>t.filter(i=>i.type==="menu"))),this.services$=this._servicesAndMenus$.pipe(C(t=>t.filter(i=>i.type==="service")))}ngOnInit(){this._lovService.getMenusAndServicesLov(),this._navService.updateNav({show:!1,back:!1})}getCardConfig(t){return{header:{title:{text:t.name,tag:"h4",translate:!1,addClass:"pt-3"},suffixButton:this._menuSettingsScreen?{label:{text:"Settings"},prefixIcon:{icon:"icon_settings"},matType:"mat-icon-button",onClick:()=>{this._navService.navigateTo(v.LAYOUT.children.MENU_SETTINGS.route,{MenuId:t._id})}}:void 0},footer:{buttons:[{label:{text:"Invoice"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_file"},onClick:()=>{this._navService.navigateTo(v.LAYOUT.children.INVOICE.route,{MenuId:t._id})},hide:h(!(t.hasInvoice&&this._menuInvoiceScreen))},{label:{text:"Edit Menu Data"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_edit"},onClick:()=>{this._navService.navigateTo(v.LAYOUT.children.MENU.route,{MenuId:t._id})},hide:h(!this._menuCrudScreen)}],position:"center"},addClass:"h-100"}}getServiceCardConfig(t){return{header:{title:{text:t.name,tag:"h4"},suffixButton:this._serviceSettingsScreen?{label:{text:"Settings"},prefixIcon:{icon:"icon_settings"},matType:"mat-icon-button",onClick:()=>{this._navService.navigateTo(v.LAYOUT.children.SERVICE_SETTINGS.route,{ServiceId:t._id})}}:void 0},footer:{buttons:[{label:{text:"Edit Service Data"},matType:"mat-stroked-button",prefixIcon:{icon:"icon_edit"},onClick:()=>{this._serviceDataService.getServiceById(t._id).pipe(M(1)).subscribe(i=>{if(i.data){let o=i.data;this._dialog.openFormPopup({hideClearButton:!0,title:{text:"Service Settings"},form:A(D({},o.service.fields),{value:o?.data?.data}),beforeCloseObservable:f=>this._serviceDataService.saveService(f,t._id,o?.data?._id)})}})},hide:h(!this._serviceDataScreen?.fullPath||!t.editable)}],position:"center"},addClass:"h-100"}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=P({type:e,selectors:[["ks-solutions-layout-home-page"]],standalone:!0,features:[$([E]),B],decls:5,vars:6,consts:[[1,"container-fluid","my-5"],[1,"text-center",3,"config"],[1,"row"],[1,"col-12","col-sm-6","col-md-6","col-lg-4","col-xl-3","mb-4"],[1,"cs-card","h-100","shadow-sm","border","border-1","rounded-2"],[3,"config"],[1,"mt-3"]],template:function(i,o){if(i&1&&(l(0,"div",0),c(1,z,1,1),T(2,"async"),c(3,Z,1,1),T(4,"async"),m()),i&2){let f,L;r(),s((f=I(2,2,o.menus$))?1:-1,f),r(2),s((L=I(4,4,o.services$))?3:-1,L)}},dependencies:[N,O,R],styles:[".cs-card[_ngcontent-%COMP%]{transition:transform .3s}"],changeDetection:0})}}return e})();export{Se as LayoutHomeComponent};
