import{a as z}from"./chunk-JE2TZ4BC.js";import{a as V}from"./chunk-EDHW7UVH.js";import{a as j}from"./chunk-RN7YLSYN.js";import"./chunk-V3RKPLKU.js";import"./chunk-5YWUWVK4.js";import{a as B}from"./chunk-DDY2ZFNV.js";import{$ as E,A as w,C as S,D as R,E as v,G as T,H as I,K as M,L as D,ba as q,da as L,ea as O,fa as A,ja as N,la as G}from"./chunk-E5MLKHCJ.js";import"./chunk-CARY4E7O.js";import{l as x}from"./chunk-ARNZMF2R.js";import{$b as h,Fa as b,Hb as n,N as _,Nb as F,Sb as s,Tb as a,Ub as c,hb as o,ka as l,mc as p,oa as P,sb as g,uc as k,vc as r,wc as u,xc as C,yc as f,zb as y}from"./chunk-42PURYOY.js";var Z=()=>({addClass:"background-transparent p-2"}),H=()=>({text:"Reset Password",tag:"h3",fontWeight:"500",case:"uppercase"}),J=()=>({text:"Password"}),U=()=>({icon:"icon_lock",color:"var(--primary-color)"}),W=(e,m,i)=>({label:e,control:m,type:"password",prefixIcon:i}),K=()=>({text:"Confirm Password"}),X=()=>({text:"Go back to login"}),$=()=>({icon:"icon_backward"}),ee=(e,m)=>({label:e,prefixIcon:m}),te=()=>({text:"Reset Password"}),oe=()=>({"min-height":"45px"}),ne=(e,m,i)=>({label:e,addStyles:m,matType:"mat-stroked-button",type:"submit",color:"primary",disabled:i,takeFullWidth:!0}),Q=e=>({text:e,translate:!1}),re=()=>({text:"Powered By"}),ie=e=>({loading:e,disableInteractions:!0});function se(e,m){e&1&&(s(0,"div",8),p(1,"Passwords does not match"),a())}var be=(()=>{class e{constructor(){this._authService=l(z),this._route=l(x),this._destroyRef=l(b),this._navbar=l(B),this.noMatch=g(!1),this.isReqInProgress=g(!1),this.constants=j,this.date=new Date().getFullYear(),this.resetPasswordForm=new R({newPassword:new v("",[w.required,q({minLength:8,maxLength:20,preventSpace:!0,forceNumbers:!0,forceLowerCase:!0,forceUppercase:!0,forceSpecialCharacters:!0})]),confirmPassword:new v("",[w.required])})}ngOnInit(){window.scrollTo(0,0),this._theme=this._navbar.getCurrentTheme(),this._navbar.forceTheme("dark",!0),this._route.queryParamMap.subscribe(i=>{let d=i.get("token");this._token=d?decodeURIComponent(d):""}),this.resetPasswordForm.valueChanges.pipe(D(this._destroyRef)).subscribe(i=>{i.confirmPassword&&i.newPassword!==i.confirmPassword?this.noMatch.set(!0):this.noMatch.set(!1)})}ngOnDestroy(){this._navbar.forceTheme(this._theme)}goToLogin(){this._navbar.navigateTo(V.LOGIN.route)}resetPassword(){this.noMatch()||E(this.resetPasswordForm)&&this._token&&this.resetPasswordForm.value.newPassword&&(this.isReqInProgress.set(!0),this._authService.resetPassword(this._token,this.resetPasswordForm.value.newPassword).pipe(_(1)).subscribe({next:()=>{this.goToLogin(),this.isReqInProgress.set(!1)},error:()=>{this.isReqInProgress.set(!1)}}))}static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275cmp=P({type:e,selectors:[["ks-solutions-reset-password"]],standalone:!0,features:[k],decls:26,vars:44,consts:[[1,"login-container","d-flex","align-items-center","justify-content-center"],[1,"login-card",3,"config"],[1,"py-3","mx-auto"],[1,"text-center",3,"config"],[1,"h5","text-center"],[1,"px-sm-1","px-md-4","py-2",3,"ngSubmit","formGroup"],[1,"mt-2"],[3,"config"],[1,"text-danger","text-center"],[1,"mb-3","small","text-end"],[3,"onClick","config"],[1,"mt-4",3,"config"],[1,"mt-3","small","mx-auto","text-center"],[2,"font-size","14px","padding-top","2px"],[1,"small","mx-auto","text-center","mt-2"],[1,"cs-primary-color"]],template:function(d,t){d&1&&(s(0,"div",0)(1,"ks-base-card",1)(2,"div",2),c(3,"ks-base-label",3),s(4,"div",4),p(5,"Please enter your new password."),a()(),s(6,"div")(7,"form",5),h("ngSubmit",function(){return t.resetPassword()}),s(8,"div",6),c(9,"ks-base-input",7),a(),s(10,"div",6),c(11,"ks-base-input",7),a(),y(12,se,2,0,"div",8),s(13,"div",9)(14,"ks-base-button",10),h("onClick",function(){return t.goToLogin()}),a()(),c(15,"ks-base-button",11),a()(),s(16,"div",12)(17,"span",13),p(18,"\xA9"),a(),c(19,"ks-base-label",7),a(),s(20,"div",14),c(21,"ks-base-label",7),p(22," \xA0 "),s(23,"b",15),c(24,"ks-base-label",7),a()()(),c(25,"ks-loader-overlay",7),a()),d&2&&(o(),n("config",r(12,Z)),o(2),n("config",r(13,H)),o(4),n("formGroup",t.resetPasswordForm),o(2),n("config",f(16,W,r(14,J),t.resetPasswordForm.controls.newPassword,r(15,U))),o(2),n("config",f(22,W,r(20,K),t.resetPasswordForm.controls.confirmPassword,r(21,U))),o(),F(t.noMatch()===!0&&t.resetPasswordForm.controls.newPassword.dirty&&t.resetPasswordForm.controls.confirmPassword.dirty?12:-1),o(2),n("config",C(28,ee,r(26,X),r(27,$))),o(),n("config",f(33,ne,r(31,te),r(32,oe),t.isReqInProgress)),o(4),n("config",u(37,Q,"2022 - "+t.date+" - Version: "+t.constants.version)),o(2),n("config",r(39,re)),o(3),n("config",u(40,Q,t.constants.appOwner)),o(),n("config",u(42,ie,t.isReqInProgress)))},dependencies:[A,N,M,T,S,I,O,G,L],styles:['.login-container[_ngcontent-%COMP%]{overflow-y:auto;min-height:100dvh;background:url("./media/login-5DPQAA6Z.jpg");background-size:cover}.login-card[_ngcontent-%COMP%]{width:calc(100vw - 20px);max-width:500px}.spinner-container[_ngcontent-%COMP%]{height:100dvh;width:100vw;position:absolute;z-index:100000}'],changeDetection:0})}}return e})();export{be as ResetPasswordComponent};
