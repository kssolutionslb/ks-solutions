import{a as B}from"./chunk-THAFKNXY.js";import{a as A}from"./chunk-EU3K55CM.js";import"./chunk-WXUQAWQR.js";import{a as z}from"./chunk-FQRZVHIL.js";import"./chunk-O4Z7XCTG.js";import"./chunk-HMNUYURD.js";import{a as D}from"./chunk-DGQRDBDH.js";import{B as R,C as b,D as O,E as T,F,G as _,I as E,K as G,L as V,O as I,P as N,ha as q,ja as L}from"./chunk-YIOKFAT3.js";import"./chunk-CARY4E7O.js";import{m as S}from"./chunk-WLEIZKK2.js";import{Aa as i,Ba as f,Bb as c,Fa as y,Jb as p,N as C,Pb as g,Ub as t,Vb as o,Wb as r,bc as u,jb as s,ka as w,oa as v,oc as m,pd as x,ub as P,xc as M,zc as k}from"./chunk-E5CLUL7I.js";var H=e=>({title:"Create New Password",subTitle:"Enter your new secure password",isReqInProgress:e});function j(e,a){e&1&&(i(),t(0,"svg",10),r(1,"path",21)(2,"line",22),o())}function U(e,a){e&1&&(i(),t(0,"svg",10),r(1,"path",23)(2,"circle",24),o())}function Y(e,a){e&1&&(t(0,"span",11),m(1,"Password must be 8-20 chars with uppercase, lowercase, number & special char"),o())}function J(e,a){e&1&&(i(),t(0,"svg",10),r(1,"path",21)(2,"line",22),o())}function K(e,a){e&1&&(i(),t(0,"svg",10),r(1,"path",23)(2,"circle",24),o())}function Q(e,a){e&1&&(t(0,"div",14),i(),t(1,"svg",17),r(2,"circle",25)(3,"line",26)(4,"line",27),o(),m(5," Passwords do not match "),o())}function W(e,a){e&1&&r(0,"span",20)}function X(e,a){e&1&&m(0," Reset Password ")}var ge=(()=>{class e{constructor(){this._authService=w(A),this._route=w(S),this._destroyRef=w(y),this._navbar=w(D),this.noMatch=P(!1),this.isReqInProgress=P(!1),this.showPassword=!1,this.showConfirmPassword=!1,this.resetPasswordForm=new F({newPassword:new _("",[b.required,L({minLength:8,maxLength:20,preventSpace:!0,forceNumbers:!0,forceLowerCase:!0,forceUppercase:!0,forceSpecialCharacters:!0})]),confirmPassword:new _("",[b.required])})}ngOnInit(){this._route.queryParamMap.subscribe(l=>{let d=l.get("token");this._token=d?decodeURIComponent(d):""}),this.resetPasswordForm.valueChanges.pipe(N(this._destroyRef)).subscribe(l=>{l.confirmPassword&&l.newPassword!==l.confirmPassword?this.noMatch.set(!0):this.noMatch.set(!1)})}togglePassword(){this.showPassword=!this.showPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}goToLogin(){this._navbar.navigateTo(z.LOGIN.route)}resetPassword(){this.noMatch()||q(this.resetPasswordForm)&&this._token&&this.resetPasswordForm.value.newPassword&&(this.isReqInProgress.set(!0),this._authService.resetPassword(this._token,this.resetPasswordForm.value.newPassword).pipe(C(1)).subscribe({next:()=>{this.goToLogin(),this.isReqInProgress.set(!1)},error:()=>{this.isReqInProgress.set(!1)}}))}static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275cmp=v({type:e,selectors:[["ks-solutions-reset-password"]],standalone:!0,features:[M],decls:34,vars:12,consts:[[3,"config"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","newPassword"],[1,"input-wrapper"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"input-icon"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],["id","newPassword","formControlName","newPassword","placeholder","Enter new password","autocomplete","new-password",3,"type"],["type","button",1,"toggle-password",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"error-text"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password","autocomplete","new-password",3,"type"],[1,"error-message"],[1,"back-link"],["type","button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],["type","submit",1,"submit-btn",3,"disabled"],[1,"btn-spinner"],["d","M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"],["x1","1","y1","1","x2","23","y2","23"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"]],template:function(d,n){d&1&&(t(0,"ks-solutions-form-layout",0)(1,"form",1),u("ngSubmit",function(){return n.resetPassword()}),t(2,"div",2)(3,"label",3),m(4,"New Password"),o(),t(5,"div",4),i(),t(6,"svg",5),r(7,"rect",6)(8,"path",7),o(),f(),r(9,"input",8),t(10,"button",9),u("click",function(){return n.togglePassword()}),c(11,j,3,0,":svg:svg",10)(12,U,3,0,":svg:svg",10),o()(),c(13,Y,2,0,"span",11),o(),t(14,"div",2)(15,"label",12),m(16,"Confirm Password"),o(),t(17,"div",4),i(),t(18,"svg",5),r(19,"rect",6)(20,"path",7),o(),f(),r(21,"input",13),t(22,"button",9),u("click",function(){return n.toggleConfirmPassword()}),c(23,J,3,0,":svg:svg",10)(24,K,3,0,":svg:svg",10),o()()(),c(25,Q,6,0,"div",14),t(26,"div",15)(27,"button",16),u("click",function(){return n.goToLogin()}),i(),t(28,"svg",17),r(29,"path",18),o(),m(30," Back to Sign In "),o()(),f(),t(31,"button",19),c(32,W,1,0,"span",20)(33,X,1,0),o()()()),d&2&&(p("config",k(10,H,n.isReqInProgress)),s(),p("formGroup",n.resetPasswordForm),s(8),p("type",n.showPassword?"text":"password"),s(2),g(n.showPassword?11:12),s(2),g(n.resetPasswordForm.controls.newPassword.touched&&n.resetPasswordForm.controls.newPassword.invalid?13:-1),s(8),p("type",n.showConfirmPassword?"text":"password"),s(2),g(n.showConfirmPassword?23:24),s(2),g(n.noMatch()===!0&&n.resetPasswordForm.controls.newPassword.dirty&&n.resetPasswordForm.controls.confirmPassword.dirty?25:-1),s(6),p("disabled",n.isReqInProgress()),s(),g(n.isReqInProgress()?32:33))},dependencies:[I,E,R,O,T,G,V,B,x],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#e2e8f0;margin-bottom:.5rem}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;color:#64748b;pointer-events:none}input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%;padding:.875rem 3rem .875rem 2.75rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:10px;font-size:.95rem;color:#fff;outline:none;transition:all .2s ease}input[type=password][_ngcontent-%COMP%]::placeholder, input[type=text][_ngcontent-%COMP%]::placeholder{color:#64748b}input[type=password][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus{border-color:#06b6d4;box-shadow:0 0 0 3px #06b6d41a}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:1rem;background:none;border:none;color:#64748b;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center}.toggle-password[_ngcontent-%COMP%]:hover{color:#94a3b8}.error-text[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#f87171;margin-top:.5rem;line-height:1.4}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:#ef44441a;border:1px solid rgba(239,68,68,.2);border-radius:8px;color:#f87171;font-size:.875rem;margin-bottom:1rem}.back-link[_ngcontent-%COMP%]{text-align:right;margin-bottom:1.5rem}.back-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:none;border:none;color:#06b6d4;font-size:.875rem;cursor:pointer;padding:0}.back-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#22d3ee;text-decoration:underline}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:.875rem;background:linear-gradient(135deg,#06b6d4,#0891b2);border:none;border-radius:10px;font-size:1rem;font-weight:600;color:#fff;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;min-height:48px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#0891b2,#0e7490);transform:translateY(-1px)}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"],changeDetection:0})}}return e})();export{ge as ResetPasswordComponent};
